"use strict";(self.webpackChunkswirl_dashboard=self.webpackChunkswirl_dashboard||[]).push([[693],{54213:(e,t,s)=>{s.d(t,{A:()=>r});s(65043);var a=s(18392),o=s(91259),n=s(6720),i=s(45394),l=s(70579);const r=e=>{let{selectedPlalist:t,data:s,setselectedPlalist:r}=e;const d=e=>{e.preventDefault()};return(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{children:(0,l.jsx)(o.Ay,{options:s,isMulti:!0,value:t,onChange:e=>{e.length>0&&parseInt(e[e.length-1].videoCount)>9||r(e)},placeholder:"Select playlist",getOptionLabel:e=>e.name,getOptionValue:e=>e.id,closeMenuOnSelect:!1,components:{Option:e=>{let{children:t,...s}=e;return(0,l.jsx)(a.c.Option,{...s,isDisabled:parseInt(s.data.videoCount)>9,children:(0,l.jsxs)("div",{className:"w-100 d-flex",children:[(0,l.jsxs)("span",{children:[t," "," ",parseInt(s.data.videoCount)>9?"(Max videos selected)":""]}),(0,l.jsx)("span",{className:"text-dark float-end ms-auto",style:{fontSize:"14px",paddingTop:"3px",paddingLeft:"3px",paddingRight:"3px",borderRadius:"15px",backgroundColor:"rgb(238, 238, 119)"},children:(0,l.jsxs)("small",{children:[s.data.videoCount," ",parseInt(s.data.videoCount)>1?"Videos":"Video"]})})]})})}}})}),(0,l.jsx)("div",{style:{display:"flex"},children:t.map(((e,s)=>(0,l.jsx)("div",{onDragStart:e=>((e,t)=>{e.dataTransfer.setData("index",t)})(e,s),onDragOver:d,onDrop:e=>((e,s)=>{const a=e.dataTransfer.getData("index"),o=t[a],n=[...t];n.splice(a,1),n.splice(s,0,o),r(n)})(e,s),draggable:!0,className:"m-1",style:{background:"#EEEE77",color:"#17171C",padding:"3px 9px",borderRadius:"15px",cursor:"pointer"},children:(0,l.jsxs)("small",{children:[" ",(0,l.jsx)(n.LUV,{})," ",e.name," ",(0,l.jsx)(i.$8F,{style:{marginTop:"-2px"},onClick:()=>(e=>{const s=[...t];s.splice(e,1),r(s)})(s)})]})},s)))})]})}},79936:(e,t,s)=>{s.d(t,{A:()=>l});s(65043);var a=s(91259),o=s(6720),n=s(45394),i=(s(91036),s(70579));const l=e=>{let{data:t,selectedItems:s,setSelectedItems:l}=e;const r=e=>{e.preventDefault()};return(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"mt-3",children:(0,i.jsx)(a.Ay,{options:t,formatSelectedOptionLabel:e=>((e,t)=>{let{productTitle:s}=e;var a,o;if(s)return"option"===t?s:(o=40,(null===(a=s)||void 0===a?void 0:a.length)<=o?a:(null===a||void 0===a?void 0:a.substring(0,o))+"...")})(e,"option"),hideSelectedOptions:!0,className:"w-100",isMulti:!0,value:s,getOptionLabel:e=>e.productTitle,getOptionValue:e=>e.productId,onChange:e=>{l(e)},placeholder:"Attach Products",closeMenuOnSelect:!1,styles:{control:e=>({...e,width:"100%"}),option:e=>({...e,fontSize:"12px"})},backspaceRemovesValue:!0,isOptionDisabled:()=>7===s.length})}),(0,i.jsx)("div",{style:{display:"flex",flexWrap:"wrap"},children:s.map(((e,t)=>(0,i.jsx)("div",{onDragStart:e=>((e,t)=>{e.dataTransfer.setData("index",t)})(e,t),onDragOver:r,onDrop:e=>((e,t)=>{const a=e.dataTransfer.getData("index"),o=s[a],n=[...s];n.splice(a,1),n.splice(t,0,o),l(n)})(e,t),draggable:!0,className:"m-1",style:{background:"#EEEE77",color:"#17171C",padding:"3px 9px",borderRadius:"15px",cursor:"pointer"},children:(0,i.jsxs)("small",{title:e.productTitle,children:[" ",(0,i.jsx)(o.LUV,{})," ",e.productTitle.slice(0,20)," ",(0,i.jsx)(n.$8F,{style:{marginTop:"-2px"},onClick:()=>(e=>{const t=[...s];t.splice(e,1),l(t)})(t)})]})},t)))})]})}},40932:(e,t,s)=>{s(65043),s(70579)},96690:(e,t,s)=>{s.d(t,{A:()=>n});s(65043);var a=s(17451),o=s(70579);const n=e=>{let{show:t,handleClose:s,url:n}=e;return(0,o.jsx)(a.A,{show:t,className:"d-grid modal_video",size:"lg",onHide:s,children:(0,o.jsx)(a.A.Body,{children:(0,o.jsx)("div",{className:"row m-0 p-0",children:(0,o.jsx)("div",{style:{maxWidth:"400px",margin:"0",padding:"0"},children:(0,o.jsxs)("video",{className:"modal_video",controls:!0,width:"600",height:"400",autoPlay:!0,loop:!0,children:[(0,o.jsx)("source",{src:n,type:"video/mp4"}),"Your browser does not support the video tag."]})})})})})}},22349:(e,t,s)=>{s.r(t),s.d(t,{default:()=>R});var a=s(65043),o=s(41591),n=s(58786),i=s(21467),l=s(86347),r=s(60184),d=s(17451),c=s(37064),m=s(59085);const h={apiKey:window.atob("QUl6YVN5QXVCWEJUb2NzaFU1a2V4T28tTzNqNW40SkZsblZReU9v"),authDomain:"swirl-short-vido.firebaseapp.com",projectId:"swirl-short-vido",storageBucket:"swirl-short-vido.appspot.com"},p=(0,c.Wp)(h),u=(0,m.aU)(p);var x=s(19550),g=s(77154),v=s(83003),b=s(47196),j=s(45394),w=s(66833),y=s(86178),f=s.n(y),_=s(91036),C=s(70579);const N=e=>{var t;let{el:s,updatePinStatus:o,removeComment:n}=e;const[i,l]=(0,a.useState)(!1),r=Number(s.createdAt),d=f()(r).fromNow();return(0,C.jsxs)("div",{className:"d-flex ps-2 pe-2 pt-2 hover-target-".concat(s.id),onMouseEnter:()=>{l(!0)},onMouseMove:()=>{l(!0)},onMouseOver:()=>{l(!0)},onMouseLeave:()=>{l(!1)},children:[s.brand_logo?(0,C.jsx)("img",{style:{height:"30px",width:"30px",borderRadius:"50%"},src:s.brand_logo}):(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)("svg",{width:"37",height:"37",viewBox:"0 0 30 31",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,C.jsx)("g",{filter:"url(#filter0_b_284_9460)",children:(0,C.jsx)("circle",{cx:"15",cy:"15.6431",r:"15",fill:"#E8E8E8"})}),(0,C.jsx)("g",{"clip-path":"url(#clip0_284_9460)",children:(0,C.jsx)("path",{d:"M9.66699 22.3096C9.66699 20.8951 10.2289 19.5385 11.2291 18.5383C12.2293 17.5381 13.5858 16.9762 15.0003 16.9762C16.4148 16.9762 17.7714 17.5381 18.7716 18.5383C19.7718 19.5385 20.3337 20.8951 20.3337 22.3096H19.0003C19.0003 21.2487 18.5789 20.2313 17.8288 19.4811C17.0786 18.731 16.0612 18.3096 15.0003 18.3096C13.9395 18.3096 12.922 18.731 12.1719 19.4811C11.4218 20.2313 11.0003 21.2487 11.0003 22.3096H9.66699ZM15.0003 16.3096C12.7903 16.3096 11.0003 14.5196 11.0003 12.3096C11.0003 10.0996 12.7903 8.30957 15.0003 8.30957C17.2103 8.30957 19.0003 10.0996 19.0003 12.3096C19.0003 14.5196 17.2103 16.3096 15.0003 16.3096ZM15.0003 14.9762C16.4737 14.9762 17.667 13.7829 17.667 12.3096C17.667 10.8362 16.4737 9.6429 15.0003 9.6429C13.527 9.6429 12.3337 10.8362 12.3337 12.3096C12.3337 13.7829 13.527 14.9762 15.0003 14.9762Z",fill:"#747477"})}),(0,C.jsxs)("defs",{children:[(0,C.jsxs)("filter",{id:"filter0_b_284_9460",x:"-10",y:"-9.35693",width:"50",height:"50",filterUnits:"userSpaceOnUse","color-interpolation-filters":"sRGB",children:[(0,C.jsx)("feFlood",{"flood-opacity":"0",result:"BackgroundImageFix"}),(0,C.jsx)("feGaussianBlur",{in:"BackgroundImageFix",stdDeviation:"5"}),(0,C.jsx)("feComposite",{in2:"SourceAlpha",operator:"in",result:"effect1_backgroundBlur_284_9460"}),(0,C.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_backgroundBlur_284_9460",result:"shape"})]}),(0,C.jsx)("clipPath",{id:"clip0_284_9460",children:(0,C.jsx)("rect",{width:"16",height:"16",fill:"white",transform:"translate(7 7.64307)"})})]})]})}),(0,C.jsxs)("div",{className:"d-flex ms-2 w-100 justify-content-between",children:[(0,C.jsxs)("div",{children:[(0,C.jsxs)("b",{children:[s.uName,(0,C.jsx)(w.dnm,{size:10,color:"#D9D9D9"}),(0,C.jsx)("small",{className:"ps-1",style:{color:"rgba(0,0,0,0.5)"},children:d})]}),(0,C.jsxs)("p",{style:{fontWeight:"lighter",color:"#515151",textWrap:"wrap",wordBreak:"break-all"},children:[null!==s&&void 0!==s&&null!==(t=s.comment)&&void 0!==t&&t.includes("http")?(0,C.jsx)("a",{href:s.comment,target:"_blank",children:s.comment}):(c=s.comment,c.replace(/&#(\d+);/g,((e,t)=>String.fromCodePoint(t))))," "]})]}),(0,C.jsxs)("div",{className:"d-flex hidden-div-".concat(s.id," gap-1"),style:{visibility:i?"visible":"hidden",cursor:"pointer"},children:[1==s.isPinned?(0,C.jsx)(b.Sf7,{onClick:()=>o(s),size:21}):(0,C.jsx)(b.xKd,{onClick:()=>o(s),size:21}),(0,C.jsx)(j.dW_,{size:18,onClick:()=>n(s),color:"red"})]})]})]});var c},k=e=>{var t;let{el:s,updatePinStatus:o,removeComment:n}=e;const[i,l]=(0,a.useState)(!1),r=Number(s.createdAt),d=f()(r).fromNow();return(0,C.jsxs)("div",{className:"d-flex ps-2 pe-2 pt-2 hover-target-".concat(s.id),style:{backgroundColor:"#F3F4F8"},onMouseEnter:()=>{l(!0)},onMouseMove:()=>{l(!0)},onMouseLeave:()=>{l(!1)},children:[s.brand_logo?(0,C.jsx)("img",{style:{height:"30px",width:"30px",borderRadius:"50%"},src:s.brand_logo}):(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)("svg",{width:"37",height:"37",viewBox:"0 0 30 31",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,C.jsx)("g",{filter:"url(#filter0_b_284_9460)",children:(0,C.jsx)("circle",{cx:"15",cy:"15.6431",r:"15",fill:"#E8E8E8"})}),(0,C.jsx)("g",{"clip-path":"url(#clip0_284_9460)",children:(0,C.jsx)("path",{d:"M9.66699 22.3096C9.66699 20.8951 10.2289 19.5385 11.2291 18.5383C12.2293 17.5381 13.5858 16.9762 15.0003 16.9762C16.4148 16.9762 17.7714 17.5381 18.7716 18.5383C19.7718 19.5385 20.3337 20.8951 20.3337 22.3096H19.0003C19.0003 21.2487 18.5789 20.2313 17.8288 19.4811C17.0786 18.731 16.0612 18.3096 15.0003 18.3096C13.9395 18.3096 12.922 18.731 12.1719 19.4811C11.4218 20.2313 11.0003 21.2487 11.0003 22.3096H9.66699ZM15.0003 16.3096C12.7903 16.3096 11.0003 14.5196 11.0003 12.3096C11.0003 10.0996 12.7903 8.30957 15.0003 8.30957C17.2103 8.30957 19.0003 10.0996 19.0003 12.3096C19.0003 14.5196 17.2103 16.3096 15.0003 16.3096ZM15.0003 14.9762C16.4737 14.9762 17.667 13.7829 17.667 12.3096C17.667 10.8362 16.4737 9.6429 15.0003 9.6429C13.527 9.6429 12.3337 10.8362 12.3337 12.3096C12.3337 13.7829 13.527 14.9762 15.0003 14.9762Z",fill:"#747477"})}),(0,C.jsxs)("defs",{children:[(0,C.jsxs)("filter",{id:"filter0_b_284_9460",x:"-10",y:"-9.35693",width:"50",height:"50",filterUnits:"userSpaceOnUse","color-interpolation-filters":"sRGB",children:[(0,C.jsx)("feFlood",{"flood-opacity":"0",result:"BackgroundImageFix"}),(0,C.jsx)("feGaussianBlur",{in:"BackgroundImageFix",stdDeviation:"5"}),(0,C.jsx)("feComposite",{in2:"SourceAlpha",operator:"in",result:"effect1_backgroundBlur_284_9460"}),(0,C.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_backgroundBlur_284_9460",result:"shape"})]}),(0,C.jsx)("clipPath",{id:"clip0_284_9460",children:(0,C.jsx)("rect",{width:"16",height:"16",fill:"white",transform:"translate(7 7.64307)"})})]})]})}),(0,C.jsxs)("div",{className:"d-flex ms-2 w-100 justify-content-between",children:[(0,C.jsxs)("div",{children:[(0,C.jsxs)("b",{children:[s.uName,(0,C.jsx)(w.dnm,{size:10,color:"#D9D9D9"}),(0,C.jsx)("small",{className:"ps-1",style:{color:"rgba(0,0,0,0.5)"},children:d})]}),(0,C.jsxs)("p",{style:{fontWeight:"lighter",color:"#515151",textWrap:"wrap",wordBreak:"break-all"},children:[null!==s&&void 0!==s&&null!==(t=s.comment)&&void 0!==t&&t.includes("http")?(0,C.jsx)("a",{href:s.comment,target:"_blank",children:s.comment}):(c=s.comment,c.replace(/&#(\d+);/g,((e,t)=>String.fromCodePoint(t))))," "]})]}),(0,C.jsxs)("div",{className:"d-flex hidden-div-".concat(s.id," gap-1"),style:{visibility:i?"visible":"hidden",cursor:"pointer"},children:[1==s.isPinned?(0,C.jsx)(b.Sf7,{onClick:()=>o(s),size:21}):(0,C.jsx)(b.xKd,{onClick:()=>o(s),size:21}),(0,C.jsx)(j.dW_,{size:18,onClick:()=>n(s),color:"red"})]})]})]});var c},S=e=>{let{show:t,handleClose:s,data:o}=e;const[n,i]=(0,a.useState)("products"),[l,r]=(0,a.useState)(!1),[c,m]=(0,a.useState)([]),h=(0,v.d4)((e=>e.auth.user)),[p,b]=(0,a.useState)([]),[j,w]=(0,a.useState)(""),[y,f]=(0,a.useState)([]),[S,D]=(0,a.useState)(!1),A=(0,a.useRef)(),T=(0,a.useRef)(null),M=o.video_id,E=async e=>{try{const t=(0,x.H9)(u,"ssv13_comments/v".concat(M,"/comments/").concat(e.id));await(0,x.mZ)(t,e),I()}catch(t){throw console.error("Error updating video comment document: ",t),t}},P=()=>{var e;null===(e=A.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},I=()=>{const e=(0,x.rJ)(u,"ssv13_comments","v".concat(o.video_id),"comments"),t=(0,x.P)(e,(0,x.My)("createdAt","asc"));(0,x.aQ)(t,(e=>{const t=e.docs.map((e=>({id:e.id,...e.data()}))),s=t.filter((e=>1===e.isPinned));b(t),f(s)}),(e=>{console.error("Error fetching data: ",e)}))},V=async e=>{e.preventDefault();try{let t={uName:h.first_name,comment:j,createdAt:(new Date).getTime(),isPinned:0,isRemoved:0,brand_logo:null===h||void 0===h?void 0:h.user_profile};await(async(e,t)=>{try{const s=(0,x.H9)(u,"ssv13_comments/v".concat(e));await(0,x.BN)(s,{});const a=await(0,x.gS)((0,x.rJ)(u,"ssv13_comments/v".concat(e,"/comments")),t);return P(),I(),a.id}catch(s){throw console.error("Error adding video comment document: ",s),s}})(o.video_id,t),I(),e.target.reset()}catch(t){console.log(t)}},B=async e=>{const t=(0,x.H9)(u,"ssv13_comments","v".concat(o.video_id),"comments",e.id);0===e.isPinned?y.length<4?await(0,x.mZ)(t,{isPinned:0===e.isPinned?1:0}):_.oR.warn("4 pinned comment section added fullfiled"):await(0,x.mZ)(t,{isPinned:0}),I()},F=async e=>{try{const t=(0,x.H9)(u,"ssv13_comments","v".concat(o.video_id),"comments",e.id);await(0,x.kd)(t),I()}catch(t){console.error("Error deleting comment: ",t)}},L=()=>{T.current.scrollTop>=100?D(!0):D(!1)};(0,a.useEffect)((()=>{t&&(async()=>{r(!0);try{const e=await g.A.get("https://liveshopping.asia/getProductInfoByVideoId?brandId=".concat(h.brand_id,"&videoId=").concat(o.video_id));e.data?(m(e.data.productResp),r(!1),P()):(m([]),r(!1))}catch(e){console.log(e),m([]),r(!1)}})()}),[t]),(0,a.useEffect)((()=>{t&&setTimeout((()=>{D(!1),P()}),1e3)}),[M,t]),(0,a.useEffect)((()=>{t&&"comments"===n&&(async e=>{try{const t=(0,x.rJ)(u,"ssv13_comments","v".concat(e),"comments"),s=(0,x.P)(t,(0,x.My)("createdAt","asc")),a=await(0,x.GG)(s);console.log(a);const o=a.docs.map((e=>({id:e.id,...e.data()}))),n=o.filter((e=>1===e.isPinned));b(o),f(n),setTimeout((()=>{P()}),100)}catch(t){console.error("Error fetching data: ",t)}})(null===o||void 0===o?void 0:o.video_id)}),[t,o.video_id,n]);const R=(0,a.useRef)(),W=e=>{null===R||void 0===R||R.current.scrollIntoView()};return t?(0,C.jsx)(d.A,{show:!0,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,onHide:s,children:(0,C.jsx)("div",{className:"video-modal-ssv",children:(0,C.jsxs)("div",{className:"video-modal-ssv-row",children:[(0,C.jsx)("div",{className:"video-modal-ssv-col",children:(0,C.jsxs)("video",{className:"modal_video_col",controls:!0,width:"600",autoPlay:!0,loop:!0,muted:!0,children:[(0,C.jsx)("source",{src:o.url,type:"video/mp4"}),"Your browser does not support the video tag."]})}),(0,C.jsxs)("div",{className:"video-modal-ssv-col",children:[(0,C.jsxs)("ul",{className:"nav nav-tabs",id:"responsive-tabs",role:"tablist",children:[(0,C.jsx)("li",{className:"nav-item",role:"presentation",children:(0,C.jsx)("button",{className:"nav-link active",id:"product-tab","data-bs-toggle":"tab","data-bs-target":"#product",type:"button",role:"tab","aria-controls":"video","aria-selected":"true",onClick:()=>i("products"),children:"Products"})}),(0,C.jsx)("li",{className:"nav-item",role:"presentation",children:(0,C.jsx)("button",{className:"nav-link",id:"comments-tab","data-bs-toggle":"tab","data-bs-target":"#comments",type:"button",role:"tab","aria-controls":"Reports","aria-selected":"false",onClick:()=>i("comments"),children:"Comments"})})]}),(0,C.jsxs)("div",{className:"tab-content",id:"responsive-tabs-content",style:{height:"calc(100% - 42px)"},children:[(0,C.jsx)("div",{className:"tab-pane fade show active h-100",id:"product",role:"tabpanel","aria-labelledby":"product-tab",children:l?(0,C.jsx)("p",{className:"text-muted mt-5 text-center",children:"Loading..."}):c.map(((e,t)=>{const s=new Intl.NumberFormat(void 0,{style:"currency",currency:e.currencyName}).formatToParts(0).find((e=>"currency"===e.type)).value;return(0,C.jsxs)("div",{className:"p-2 mt-1 m-0 d-flex product_card",children:[(0,C.jsx)("img",{alt:"productmini",src:e.image,className:"rounded",style:{height:"60px",width:"60px",border:"1px solid #aaa"}}),(0,C.jsxs)("div",{className:"ps-2 w-100",children:[(0,C.jsx)("h6",{className:"mb-0 product_title_video_model",title:e.title,children:e.title}),(0,C.jsxs)("p",{className:"prouct_desc",children:[s,parseInt(e.discountPrice).toLocaleString()," ",e.discountPrice!==e.price&&(0,C.jsx)("span",{className:"text-muted",children:(0,C.jsxs)("del",{children:[s,parseInt(e.price).toLocaleString()]})})," "]})]})]},t)}))}),(0,C.jsx)("div",{className:"tab-pane fade h-100",id:"comments",role:"tabpanel","aria-labelledby":"comments-tab",children:(0,C.jsxs)("div",{className:"comment-section-main-div-ssv",children:[(0,C.jsxs)("div",{className:"section_comment_scroll",ref:T,onScroll:L,children:[(0,C.jsx)("div",{ref:R}),(0,C.jsxs)("div",{className:"pinned_section_closed",style:{display:S&&y.length>0?"":"none"},onClick:W,children:[(0,C.jsxs)("p",{children:["Pinned comment",(0,C.jsx)("label",{className:"JS-pinned-comment-counter-ssv13",children:y.length})]}),(0,C.jsx)("p",{style:{marginLeft:"auto"},children:(0,C.jsx)("svg",{width:"13",height:"13",viewBox:"0 0 13 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,C.jsx)("path",{d:"M12.8764 5.78136L11.9331 6.72402L11.4618 6.25269L8.63377 9.08069L8.16244 11.438L7.2191 12.3807L4.3911 9.55202L1.0911 12.852L0.148438 11.9094L3.44844 8.60936L0.619771 5.78136L1.56244 4.83802L3.92044 4.36669L6.74844 1.53869L6.2771 1.06736L7.21977 0.124023L12.8764 5.78136Z",fill:"#334499"})})})]}),y.length>0&&(0,C.jsx)("div",{className:"pin display-flex flex-column",children:(0,C.jsx)("div",{id:"pinnedcommentsection",children:y.map((e=>(0,C.jsx)(k,{el:e,updatePinStatus:B,removeComment:F},e.id)))})}),p.length>0?(0,C.jsx)("div",{className:"display-flex flex-column",id:"unpinnedcommentsection",style:{overflow:"auto"},children:p.map((e=>(0,C.jsx)(N,{editVideoComment:E,el:e,updatePinStatus:B,removeComment:F},e.id)))}):(0,C.jsx)("p",{className:"text-muted text-center mt-5",children:"No comments"}),(0,C.jsx)("div",{ref:A})]}),(0,C.jsx)("div",{className:"form-comment p-1 border-top",children:(0,C.jsxs)("form",{className:"d-flex",onSubmit:V,children:[(0,C.jsx)("input",{className:"form-control mt-auto",max:250,maxLength:250,onChange:e=>w(e.target.value),placeholder:"Type something here..",type:"text"}),(0,C.jsx)("button",{type:"submit",className:"btn btn-sm btn-dark ms-2",disabled:0===j.length,children:"Send"})]})})]})})]})]})]})})}):null};var D=s(11238),A=s(72450),T=s(37762),M=(s(20557),s(31121)),E=s(31462),P=s(49804),I=s(55508);const V=e=>{let{show:t,handleClose:s,data:o}=e;const[i,l]=(0,a.useState)([]),[r,c]=a.useState(!1),m=[{name:"Video Title",selector:e=>o.video_title},{name:"Name",selector:e=>e.name},{name:"Date",selector:e=>o.date},{name:"Mobile",selector:e=>e.mobile},{name:"Message",selector:e=>e.message}];(0,a.useEffect)((()=>{t&&async function(){c(!0);try{let e=new FormData;e.append("brand_id",o.brand_id),e.append("start_date",(0,M.GP)(o.startDate,"yyyy-MM-dd")),e.append("end_date",(0,M.GP)(o.endDate,"yyyy-MM-dd")),e.append("video_id",o.video_id),await g.A.post("https://bigleap.live/index.php/APIv1/ShortVideoAnalytics/getAskquestion",e).then((e=>{l(e.data.data),c(!1)})).catch((e=>{console.log(e),c(!1)}))}catch(e){throw c(!1),e}}(o.date)}),[o.date]);return(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)(d.A,{show:t,className:"d-grid w-100 askquestion_modal ",size:"lg",onHide:s,children:[(0,C.jsxs)(d.A.Title,{className:"p-3 pb-0",children:["Asked Questions ",(0,C.jsx)(E.Blb,{style:{cursor:"pointer"},title:"These are raised questions asked by viewers on video or product"}),(0,C.jsxs)("button",{className:"btn btn-sm btn-outline-dark float-end",onClick:()=>(()=>{const e=D.Wp.json_to_sheet(i),t=D.Wp.book_new();D.Wp.book_append_sheet(t,e,"Sheet1");const s=D.M9(t,{bookType:"xlsx",type:"array"});(0,A.saveAs)(new Blob([s],{type:"application/octet-stream"}),"askQuestData.xlsx")})(),children:[(0,C.jsx)("span",{className:"mt-3",children:"Export"})," ",(0,C.jsx)(P.w4m,{size:25})]}),(0,C.jsx)("hr",{})]}),(0,C.jsx)(d.A.Body,{className:"p-3 pt-0",children:(0,C.jsx)(n.Ay,{columns:m,data:i,progressPending:r,progressComponent:(0,C.jsx)("div",{className:"p-3 m-4",children:(0,C.jsx)(I.IN,{height:30,width:30,strokeColor:"grey"})})})})]})})};var B=s(3825);const F=e=>{let{state:t,setState:s}=e;const o=new Date,d=new Date(o),[c,m]=(0,a.useState)(!1),[h,p]=(0,a.useState)([]),[u,x]=(0,a.useState)(!1),[b,j]=(0,a.useState)([]),[w,y]=(0,a.useState)([]),[f,_]=(0,a.useState)(""),[N,k]=(0,a.useState)(!1),[E,F]=a.useState(!1),L=(0,v.d4)((e=>e.auth.user)),[R,W]=(0,a.useState)([]);d.setDate(o.getDate()-1);const[O,H]=(0,a.useState)([{startDate:new Date(o.getTime()-6048e5),endDate:d,key:"selection"}]),[z,Q]=(0,a.useState)(!1);const U=[{selector:e=>e.index+1,sortable:!0,width:"4%"},{name:"Video Title",selector:e=>e.video_title,sortable:!0,width:"22.2%",cell:e=>(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("p",{className:"pt-4",title:e.video_title,style:{padding:"2px",overflow:"hidden",whiteSpace:"nowrap",maxWidth:"280px",textOverflow:"ellipsis",cursor:"pointer"},onClick:()=>{p(e),m(!0)},children:[e.video_title?e.video_title:"no title"," "]}),(0,C.jsxs)("span",{onClick:()=>{p(e),m(!0)},style:{cursor:"pointer"},children:["  ",(0,C.jsx)(B.o0O,{size:20,className:"ms-1"})]})]})},{name:"Total Views",selector:e=>e.total_views,sortable:!0,style:{backgroundColor:"rgba(255, 0, 0,.1)"}},{name:"Unique  Views",selector:e=>e.total_unique_views,sortable:!0,style:{backgroundColor:"rgba(255, 0, 0,.1)"}},{name:"Watch Time [Mins]",selector:e=>e.total_watchtime,sortable:!0,style:{backgroundColor:"rgba(255, 0, 0,.1)"},cell:e=>(parseInt(e.total_watchtime)/60).toFixed(2)},{name:"Avg. Watch Time [Secs]",selector:e=>Math.round(e.average_watchtime),sortable:!0,style:{backgroundColor:"rgba(255, 0, 0,.1)"}},{name:"Add To Cart",selector:e=>e.addtoCart,sortable:!0,style:{backgroundColor:"rgba(0, 255, 71, .1)"}},{name:"Buy Now",selector:e=>e.buyNow,sortable:!0,style:{backgroundColor:"rgba(0, 255, 71, .1)"}},{name:"Ask Question",selector:e=>e.askQuestion,sortable:!0,style:{backgroundColor:"rgba(0, 255, 71, .1)"},cell:e=>e.askQuestion>0?(0,C.jsx)("p",{onClick:()=>{x(!0),j(e)},style:{cursor:"pointer"},children:(0,C.jsx)("span",{className:"badge_ask_count",children:e.askQuestion})}):(0,C.jsx)("p",{style:{padding:"3px 5px"},children:e.askQuestion})},{name:"Engage. Rate %",selector:e=>null===e.engagement_rate?"".concat("0%"):"".concat(Math.round(e.engagement_rate),"%"),sortable:!0,style:{backgroundColor:"rgba(0, 255, 71, .1)"}},{name:"CTR%",selector:e=>"".concat(Math.round(e.ctr_rate),"%"),sortable:!0,style:{backgroundColor:"rgba(0, 255, 71, .1)"}}],Z=()=>(0,C.jsx)(C.Fragment,{children:(0,C.jsx)("div",{className:"ms-3",children:(0,C.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,C.jsx)("path",{d:"M13.3333 2.6665V10.6665H15.3333L12.6667 13.9998L10 10.6665H12V2.6665H13.3333ZM8 11.9998V13.3332H2V11.9998H8ZM9.33333 7.33317V8.6665H2V7.33317H9.33333ZM9.33333 2.6665V3.99984H2V2.6665H9.33333Z",fill:"#09121F"})})})}),q=(0,a.useCallback)((async()=>{F(!0);try{await g.A.get("https://goswirl.world:3001/getAnalyticsDataByBrandIdAndDate?brand_id=".concat(null===L||void 0===L?void 0:L.brand_id,"&start_date=").concat((0,M.GP)(t[0].startDate,"yyyy-MM-dd"),"&end_date=").concat((0,M.GP)(t[0].endDate,"yyyy-MM-dd"))).then((e=>{W(e.data.resp),e.data&&F(!1)})).catch((e=>{console.log(e),F(!1)}))}catch(e){console.log(e)}}),[L.brand_id,t]);return(0,a.useEffect)((()=>{k(""!==f)}),[f]),(0,a.useEffect)((()=>{q(),(()=>{let e=0,t=0;R&&R.map((s=>{e+=parseInt(s.total_views),t+=parseInt(s.total_watchtime)}))})()}),[t,q]),(0,a.useEffect)((()=>{H(t)}),[]),(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{className:"d-flex",children:(0,C.jsx)("div",{className:"ms-auto d-flex align-items-center mb-3",children:(0,C.jsxs)("div",{className:"dropdown d-flex",children:[(0,C.jsxs)("div",{className:"input-group input-group me-1",children:[(0,C.jsx)("span",{className:"input-group-text border-end-0 border-dark",children:(0,C.jsx)(r.KSO,{})}),(0,C.jsx)("input",{type:"search",className:"form-control border-start-0 border-dark",name:"search",value:f,placeholder:"Search video...",onChange:e=>(e=>{_(e);const t=R.filter((e=>e.video_title&&e.video_title.toLowerCase().includes(f.toLowerCase())));y(t)})(e.target.value)})]}),(0,C.jsxs)(i.A,{show:z,onToggle:()=>Q(!z),children:[window.innerWidth>556?(0,C.jsx)(i.A.Toggle,{id:"dropdown-basic",className:"bg-transparent text-dark border-dark",children:(0,C.jsx)("span",{children:null!==t[0].endDate?"".concat(t[0].startDate.toString().slice(4,15)," to ").concat(t[0].endDate.toString().slice(4,15)):"Filter by date"})}):(0,C.jsx)(i.A.Toggle,{id:"dropdown-basic",className:"bg-transparent text-dark border-dark",children:(0,C.jsx)("span",{children:null!==t[0].endDate?"".concat(t[0].startDate.getFullYear().toString().slice(2,4),"/").concat(t[0].startDate.getFullYear().toString().slice(2,4),"/").concat(t[0].startDate.getFullYear().toString().slice(2,4)," - ").concat(t[0].startDate.getFullYear().toString().slice(2,4),"/").concat(t[0].startDate.getFullYear().toString().slice(2,4),"/").concat(t[0].startDate.getFullYear().toString().slice(2,4)):"Filter by date"})}),(0,C.jsxs)(i.A.Menu,{children:[(0,C.jsx)(l.Ur,{editableDateInputs:!1,onChange:e=>H([e.selection]),moveRangeOnFirstSelection:!0,ranges:O,months:2,direction:"horizontal",maxDate:d,minDate:"236633565"==(null===L||void 0===L?void 0:L.brand_id)?new Date(2024,2,15):new Date(2024,3,5)}),(0,C.jsxs)("div",{className:"w-100",children:[(0,C.jsx)("button",{id:"dropdown-basic",className:"btn btn-sm btn-primary float-end me-3",onClick:()=>{Q(!1),s(O)},children:"Done"}),(0,C.jsx)("button",{id:"dropdown-basic",className:"btn btn-sm btn-outline-primary float-end me-3",onClick:()=>{s([{startDate:new Date(o.getTime()-6048e5),endDate:d,key:"selection"}])},children:"Reset"})]})]})]}),(0,C.jsxs)(i.A,{className:"ms-1",children:[window.innerWidth>556?(0,C.jsx)(i.A.Toggle,{className:"bg-transparent text-dark border-dark",children:"Export"}):(0,C.jsx)(i.A.Toggle,{className:"bg-transparent text-dark border-dark",children:(0,C.jsx)(P.w4m,{})}),(0,C.jsxs)(i.A.Menu,{children:[(0,C.jsxs)(i.A.Item,{onClick:()=>{const e=["date","video_title","total_views","total_unique_views","total_watchtime","average_watchtime","buyNow","addtoCart","askQuestion","engagement_rate","ctr_rate"],t=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-";return e.hasOwnProperty(t)?e[t]:s};let s=["Date","Video Title","Total Views","Unique Views","Watch Time [Mins]","Avg Watch Time [Secs]","Buy Now","Add to Cart","Ask Question","Engagement %","CTR %"].join(",")+"\n";R.forEach((a=>{const o={...a,total_watchtime:(parseInt(a.total_watchtime)/60).toFixed(2)},n=[t(o,e[0]),t(o,e[1]),t(o,e[2]),t(o,e[3]),t(o,e[4]),t(o,e[5]),t(o,e[6]),t(o,e[7]),t(o,e[8]),t(o,e[9]),t(o,e[10])];s+=n.join(",")+"\n"}));const a=new Blob([s],{type:"text/csv;charset=utf-8;"});(0,A.saveAs)(a,"data.csv")},children:[(0,C.jsx)(r.QaY,{color:"gray"})," Export as CSV "]}),(0,C.jsxs)(i.A.Item,{onClick:()=>{const e=["date","video_title","total_views","total_unique_views","total_watchtime","average_watchtime","buyNow","addtoCart","askQuestion","engagement_rate","ctr_rate"],t=[["Date","Video Title","Total Views","Unique Views","Watch Time [Mins]","Avg Watch Time [Secs]","Buy Now","Add to Cart","Ask Question","Engagement %","CTR %"],...R.map((t=>{const s={...t,total_watchtime:(parseInt(t.total_watchtime)/60).toFixed(2)};return e.map((e=>function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-";return e.hasOwnProperty(t)?e[t]:s}(s,e)))}))],s=D.Wp.aoa_to_sheet(t),a=D.Wp.book_new();D.Wp.book_append_sheet(a,s,"Sheet1");const o=D.M9(a,{bookType:"xlsx",type:"array"});(0,A.saveAs)(new Blob([o],{type:"application/octet-stream"}),"data.xlsx")},children:[(0,C.jsx)(r.Ru,{color:"green"})," Export as XLS"]}),(0,C.jsxs)(i.A.Item,{onClick:()=>{const e=new T.default("l","pt","a4",!0),t=["Date","Video Title","Total Views","Unique Views","Watch Time [Mins]","Avg Watch Time [Secs]","Buy Now","Add to Cart","Ask Question","Engagement %","CTR %"],s=["date","video_title","total_views","total_unique_views","total_watchtime","average_watchtime","buyNow","addtoCart","askQuestion","engagement_rate","ctr_rate"],a=[t];R.forEach((e=>{const t={...e,total_watchtime:(parseInt(e.total_watchtime)/60).toFixed(2)},o=s.map((e=>function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-";return e.hasOwnProperty(t)?e[t]:s}(t,e)));a.push(o)})),e.autoTable({head:[t],body:a.slice(1),headStyles:{fillColor:[238,238,119],textColor:[0,0,0]},styles:{cellPadding:1,fontSize:5},columnStyles:{0:{cellWidth:"auto"}},margin:{top:20},startY:20}),e.save("data.pdf")},children:[(0,C.jsx)(r.kl1,{color:"red"})," Export as PDF"]})]})]})]})})}),(0,C.jsx)("div",{style:{width:"100%",overflow:"auto",height:"auto"},children:(0,C.jsx)("div",{style:{border:"1px solid #E0E0E0",minWidth:"1500px"},children:(0,C.jsx)(n.Ay,{columns:U,data:N?null===w||void 0===w?void 0:w.map(((e,t)=>({...e,index:t}))):null===R||void 0===R?void 0:R.map(((e,t)=>({...e,index:t}))),subHeader:!0,progressPending:E,pagination:!0,progressComponent:(0,C.jsx)("div",{className:"p-3 m-4",children:(0,C.jsx)(I.IN,{height:30,width:30,strokeColor:"grey"})}),sortIcon:(0,C.jsx)(Z,{}),highlightOnHover:!0,className:"custom-datatable",subHeaderComponent:(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)("div",{className:"d-flex w-100 table_header_row",children:[(0,C.jsx)("div",{className:"table_blank_column"}),(0,C.jsx)("div",{className:"table_higher_column",children:(0,C.jsxs)("div",{className:"d-flex text-center",children:[(0,C.jsx)("div",{className:"perfomance_column",children:"Performance"}),(0,C.jsx)("div",{className:"engagement_column",children:"Engagement"})]})})]})})})})}),(0,C.jsx)(S,{show:c,handleClose:()=>m(!1),data:h}),(0,C.jsx)(V,{show:u,handleClose:()=>x(!1),data:{...b,...t[0]}})]})};s(40932),s(79936),s(59478),s(95365),s(54213),s(91123),s(57270),s(96690),s(5060);s(20917),s(42678),s(33796);s(38421),s(46867),s(99445),s(79867),s(70922),s(97304);var L=s(73216);s(82462);s(18304);s(74857);const R=e=>{let{state:t,setState:s}=e;const[n,i]=(0,a.useState)([]),l=(0,v.d4)((e=>e.auth.user)),r=(0,L.zy)(),d=new URLSearchParams(r.search);d.get("createTable"),d.get("Tableedit");(0,a.useEffect)((()=>{(async()=>{try{await g.A.get("https://liveshopping.asia/getPlaylistByBrandId?brandId=".concat(l.brand_id)).then((e=>{e.data.playlist?i(e.data.playlist):i([])}))}catch(e){console.log(e)}})()}),[l]);const c=(0,L.Zp)();return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(o.m,{children:(0,C.jsx)("title",{children:"SWIRL | Short Videos"})}),(0,C.jsx)("div",{children:(0,C.jsxs)("div",{className:"col",children:[(0,C.jsxs)("div",{className:"d-flex",children:[(0,C.jsx)("ul",{className:"nav nav-tabs",id:"responsive-tabs",role:"tablist",children:(0,C.jsx)("li",{className:"nav-item",role:"presentation",children:(0,C.jsx)("button",{className:"nav-link show active",id:"Reports-tab","data-bs-toggle":"tab","data-bs-target":"#Reports",type:"button",role:"tab","aria-controls":"Reports","aria-selected":"false",onClick:()=>{var e;e=!1,d.set("createTable",e),c({search:d.toString()}),(e=>{d.set("Tableedit",e),c({search:d.toString()})})(!1)},children:"Reports"})})}),(0,C.jsx)("div",{className:"ms-auto d-flex align-items-center"})]}),(0,C.jsx)("div",{className:"tab-content p-3",id:"responsive-tabs-content",children:(0,C.jsx)("div",{className:"tab-pane fade show active",id:"Reports",role:"tabpanel","aria-labelledby":"Reports-tab",children:(0,C.jsx)(F,{state:t,setState:s})})})]})})]})}},95365:()=>{}}]);
//# sourceMappingURL=693.7da1791f.chunk.js.map