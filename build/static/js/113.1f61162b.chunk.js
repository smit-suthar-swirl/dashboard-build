"use strict";(self.webpackChunkswirl_dashboard=self.webpackChunkswirl_dashboard||[]).push([[113],{54213:(e,t,s)=>{s.d(t,{A:()=>i});s(65043);var a=s(18392),n=s(91259),l=s(6720),o=s(45394),r=s(70579);const i=e=>{let{selectedPlalist:t,data:s,setselectedPlalist:i}=e;const d=e=>{e.preventDefault()};return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{children:(0,r.jsx)(n.Ay,{options:s,isMulti:!0,value:t,onChange:e=>{e.length>0&&parseInt(e[e.length-1].videoCount)>9||i(e)},placeholder:"Select playlist",getOptionLabel:e=>e.name,getOptionValue:e=>e.id,closeMenuOnSelect:!1,components:{Option:e=>{let{children:t,...s}=e;return(0,r.jsx)(a.c.Option,{...s,isDisabled:parseInt(s.data.videoCount)>9,children:(0,r.jsxs)("div",{className:"w-100 d-flex",children:[(0,r.jsxs)("span",{children:[t," "," ",parseInt(s.data.videoCount)>9?"(Max videos selected)":""]}),(0,r.jsx)("span",{className:"text-dark float-end ms-auto",style:{fontSize:"14px",paddingTop:"3px",paddingLeft:"3px",paddingRight:"3px",borderRadius:"15px",backgroundColor:"rgb(238, 238, 119)"},children:(0,r.jsxs)("small",{children:[s.data.videoCount," ",parseInt(s.data.videoCount)>1?"Videos":"Video"]})})]})})}}})}),(0,r.jsx)("div",{style:{display:"flex"},children:t.map(((e,s)=>(0,r.jsx)("div",{onDragStart:e=>((e,t)=>{e.dataTransfer.setData("index",t)})(e,s),onDragOver:d,onDrop:e=>((e,s)=>{const a=e.dataTransfer.getData("index"),n=t[a],l=[...t];l.splice(a,1),l.splice(s,0,n),i(l)})(e,s),draggable:!0,className:"m-1",style:{background:"#EEEE77",color:"#17171C",padding:"3px 9px",borderRadius:"15px",cursor:"pointer"},children:(0,r.jsxs)("small",{children:[" ",(0,r.jsx)(l.LUV,{})," ",e.name," ",(0,r.jsx)(o.$8F,{style:{marginTop:"-2px"},onClick:()=>(e=>{const s=[...t];s.splice(e,1),i(s)})(s)})]})},s)))})]})}},79936:(e,t,s)=>{s.d(t,{A:()=>r});s(65043);var a=s(91259),n=s(6720),l=s(45394),o=(s(91036),s(70579));const r=e=>{let{data:t,selectedItems:s,setSelectedItems:r}=e;const i=e=>{e.preventDefault()};return(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"mt-3",children:(0,o.jsx)(a.Ay,{options:t,formatSelectedOptionLabel:e=>((e,t)=>{let{productTitle:s}=e;var a,n;if(s)return"option"===t?s:(n=40,(null===(a=s)||void 0===a?void 0:a.length)<=n?a:(null===a||void 0===a?void 0:a.substring(0,n))+"...")})(e,"option"),hideSelectedOptions:!0,className:"w-100",isMulti:!0,value:s,getOptionLabel:e=>e.productTitle,getOptionValue:e=>e.productId,onChange:e=>{r(e)},placeholder:"Attach Products",closeMenuOnSelect:!1,styles:{control:e=>({...e,width:"100%"}),option:e=>({...e,fontSize:"12px"})},backspaceRemovesValue:!0,isOptionDisabled:()=>7===s.length})}),(0,o.jsx)("div",{style:{display:"flex",flexWrap:"wrap"},children:s.map(((e,t)=>(0,o.jsx)("div",{onDragStart:e=>((e,t)=>{e.dataTransfer.setData("index",t)})(e,t),onDragOver:i,onDrop:e=>((e,t)=>{const a=e.dataTransfer.getData("index"),n=s[a],l=[...s];l.splice(a,1),l.splice(t,0,n),r(l)})(e,t),draggable:!0,className:"m-1",style:{background:"#EEEE77",color:"#17171C",padding:"3px 9px",borderRadius:"15px",cursor:"pointer"},children:(0,o.jsxs)("small",{title:e.productTitle,children:[" ",(0,o.jsx)(n.LUV,{})," ",e.productTitle.slice(0,20)," ",(0,o.jsx)(l.$8F,{style:{marginTop:"-2px"},onClick:()=>(e=>{const t=[...s];t.splice(e,1),r(t)})(t)})]})},t)))})]})}},40932:(e,t,s)=>{s(65043),s(70579)},96690:(e,t,s)=>{s.d(t,{A:()=>l});s(65043);var a=s(17451),n=s(70579);const l=e=>{let{show:t,handleClose:s,url:l}=e;return(0,n.jsx)(a.A,{show:t,className:"d-grid modal_video",size:"lg",onHide:s,children:(0,n.jsx)(a.A.Body,{children:(0,n.jsx)("div",{className:"row m-0 p-0",children:(0,n.jsx)("div",{style:{maxWidth:"400px",margin:"0",padding:"0"},children:(0,n.jsxs)("video",{className:"modal_video",controls:!0,width:"600",height:"400",autoPlay:!0,loop:!0,children:[(0,n.jsx)("source",{src:l,type:"video/mp4"}),"Your browser does not support the video tag."]})})})})})}},39449:(e,t,s)=>{s.r(t),s.d(t,{default:()=>F});var a=s(65043),n=s(73722),l=s(98139),o=s.n(l),r=s(67852),i=s(21068),d=s(19334),c=s(70579);const p=a.forwardRef(((e,t)=>{let{className:s,bsPrefix:a,as:n="span",...l}=e;return a=(0,r.oU)(a,"input-group-text"),(0,c.jsx)(n,{ref:t,className:o()(s,a),...l})}));p.displayName="InputGroupText";const u=p,h=a.forwardRef(((e,t)=>{let{bsPrefix:s,size:n,hasValidation:l,className:i,as:p="div",...u}=e;s=(0,r.oU)(s,"input-group");const h=(0,a.useMemo)((()=>({})),[]);return(0,c.jsx)(d.A.Provider,{value:h,children:(0,c.jsx)(p,{ref:t,...u,className:o()(i,s,n&&"".concat(s,"-").concat(n),l&&"has-validation")})})}));h.displayName="InputGroup";const x=Object.assign(h,{Text:u,Radio:e=>(0,c.jsx)(u,{children:(0,c.jsx)(i.A,{type:"radio",...e})}),Checkbox:e=>(0,c.jsx)(u,{children:(0,c.jsx)(i.A,{type:"checkbox",...e})})});var v=s(65173),m=s.n(v),g=s(21467),f=s(29312),j=s(51748);const b=m().oneOf(["start","end"]),y=m().oneOfType([b,m().shape({sm:b}),m().shape({md:b}),m().shape({lg:b}),m().shape({xl:b}),m().shape({xxl:b}),m().object]),N={id:m().string,href:m().string,onClick:m().func,title:m().node.isRequired,disabled:m().bool,align:y,menuRole:m().string,renderMenuOnMount:m().bool,rootCloseEvent:m().string,menuVariant:m().oneOf(["dark"]),flip:m().bool,bsPrefix:m().string,variant:m().string,size:m().string},w=a.forwardRef(((e,t)=>{let{title:s,children:a,bsPrefix:n,rootCloseEvent:l,variant:o,size:r,menuRole:i,renderMenuOnMount:d,disabled:p,href:u,id:h,menuVariant:x,flip:v,...m}=e;return(0,c.jsxs)(g.A,{ref:t,...m,children:[(0,c.jsx)(f.A,{id:h,href:u,size:r,variant:o,disabled:p,childBsPrefix:n,children:s}),(0,c.jsx)(j.A,{role:i,renderOnMount:d,rootCloseEvent:l,variant:x,flip:v,children:a})]})}));w.displayName="DropdownButton",w.propTypes=N;const C=w;var S=s(59478),_=(s(95365),s(45394)),A=(s(91123),s(60184)),k=(s(57270),s(49804)),I=s(77154),T=s(83003),U=s(91036),R=(s(55508),s(5060)),E=s.n(R),O=s(96690),B=s(79936),D=(s(40932),s(54213)),L=s(73216);function P(e){const t=E().find((t=>t.code===e));return t?t.phoneCode:null}const F=()=>{const e=(0,L.Zp)(),[t,s]=(0,a.useState)("0"),[l,o]=(0,a.useState)("0"),[r,i]=(0,a.useState)([]),[d,p]=(0,a.useState)("US"),[u,h]=(0,a.useState)("0"),[v,m]=(0,a.useState)("#000000"),[f,j]=(0,a.useState)("#ffa800"),[b,y]=(0,a.useState)(!1),[N,w]=(0,a.useState)(!1),[R,E]=(0,a.useState)(null),[F,V]=(0,a.useState)(null),[z,M]=(0,a.useState)(!1),J=(0,a.useRef)(null),K=(0,a.useRef)(null),[W,q]=(0,a.useState)(null),[G,H]=(0,a.useState)([]),[$,Y]=(0,a.useState)(0),[Z,Q]=(0,a.useState)(null),X=(0,T.d4)((e=>e.auth.user)),[ee,te]=(0,a.useState)([]),[se,ae]=(0,a.useState)([]),[ne,le]=(0,a.useState)({}),[oe,re]=(0,a.useState)(""),[ie,de]=(0,a.useState)(null),[ce,pe]=(0,a.useState)(!1),[ue,he]=(0,a.useState)({videoTitle:"",ctaBtn:"",videURL:"",pageUrl:"",videoType:"",videLength:0}),[xe,ve]=(0,a.useState)({}),me=(0,L.zy)().pathname.split("/"),ge=(me[me.length-1],(0,T.d4)((e=>e.auth.videoDataForEdit)));function fe(e,t){if(0===e.length)return"";return e.map((e=>e[t])).join(", ")}const je=(0,a.useRef)(null),be=()=>{y(!b)},ye=e=>{const{name:t,value:s}=e.target;he((e=>({...e,[t]:s})))},Ne=()=>{w(!N)},we=e=>{o(e.target.value)};(0,a.useEffect)((()=>{const e=e=>{J.current&&!J.current.contains(e.target)&&y(!1),K.current&&!K.current.contains(e.target)&&w(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]);const Ce=(0,a.useRef)(null);(0,a.useEffect)((()=>{(async()=>{try{await I.A.get("https://liveshopping.asia/getPlaylistByBrandId?brandId=".concat(X.brand_id)).then((e=>{e.data.playlist?te(e.data.playlist):te([])}))}catch(e){console.log(e)}})(),(async()=>{try{await I.A.get("https://liveshopping.asia/getProductsByBrandId?brandId=".concat(X.brand_id)).then((e=>{e.data.products?ae(e.data.products):ae([])}))}catch(e){console.log(e)}})(),(async()=>{try{await I.A.get("https://liveshopping.asia/getSwirlShortCodeInfoByBrandId?brandId=".concat(X.brand_id)).then((e=>{e.data.sscResponse&&le(e.data.sscResponse.brandCustomization)}))}catch(e){console.log(e)}})(),(async()=>{try{await I.A.get("https://liveshopping.asia/getVideoInfoByVideoId?videoId=".concat(ge.video_id)).then((e=>{var t;null!==(t=e.data)&&void 0!==t&&t.swirl&&ve(e.data.swirl)})).catch((e=>{console.log(e)}))}catch(e){}})()}),[]),(0,a.useEffect)((()=>{if(xe){const s=ee.filter((e=>{var t;return((null===xe||void 0===xe||null===(t=xe.playlistId)||void 0===t?void 0:t.split(","))||[]).includes(e.id.toString())}));if(H(s),Q(xe.coverImage),de(xe.coverImage),V(xe.serverUrl),he((e=>({...e,pageUrl:xe.shopifyUrl}))),xe.shopifyUrl)if(xe.shopifyUrl.includes("https")||xe.shopifyUrl.includes("http"))o("1"),he((e=>{var t;return{...e,pageUrl:null===xe||void 0===xe||null===(t=xe.shopifyUrl)||void 0===t?void 0:t.trim()}}));else if(o("2"),xe.shopifyUrl.includes("+")){var e;h("1");const t=null===xe||void 0===xe||null===(e=xe.shopifyUrl)||void 0===e?void 0:e.split("+");re(t[2].trim()),p(function(e){let t;return"+1"==e?t="US":"+91"==e?t="IN":"+61"==e&&(t="AU"),t}("+".concat(t[1].trim())))}else{var t;h("0"),re(null===xe||void 0===xe||null===(t=xe.shopifyUrl)||void 0===t?void 0:t.trim())}else if(xe.productId){o("0");const e=se.filter((e=>{var t,s;return((null===xe||void 0===xe||null===(t=xe.productId)||void 0===t||null===(s=t.split(","))||void 0===s?void 0:s.map((e=>e.trim())))||[]).includes(e.productId.toString())}));i(e)}}}),[ee,xe]),(0,a.useEffect)((()=>{he((e=>({...e,videoTitle:xe.videoTitle}))),null!==xe&&void 0!==xe&&xe.ctaButton&&(JSON.parse(null===xe||void 0===xe?void 0:xe.ctaButton).cta_bg_color?(he((e=>({...e,ctaBtn:JSON.parse(xe.ctaButton).cta_btn_text}))),m(JSON.parse(xe.ctaButton).cta_bg_color),j(JSON.parse(xe.ctaButton).cta_text_color)):(he((e=>({...e,ctaBtn:ne.buy_btn}))),m(ne.bk_color_buy_btn),j(ne.front_color_buy_btn)))}),[ne,xe]),(0,a.useEffect)((()=>{(()=>{const e=je.current;e&&e.addEventListener("loadedmetadata",(()=>{const t=e.videoWidth,s=e.videoHeight;he((t=>({...t,videLength:e.duration}))),he(s>t?e=>({...e,videoType:"portrait"}):t===s?e=>({...e,videoType:"square"}):e=>({...e,videoType:"landscape"}))}))})()}),[F]);return(0,a.useEffect)((()=>{ue.pageUrl&&(async()=>{const e=ue.pageUrl;try{const t=await I.A.get("https://cors-anywhere.herokuapp.com/"+e),s=(new DOMParser).parseFromString(t.data,"text/html").getElementsByTagName("title")[0],a=s?s.innerText:"No title found";a&&he((e=>({...e,videoTitle:a})))}catch(t){console.log(t)}})()}),[ue.pageUrl]),(0,c.jsx)("div",{style:{overflow:"hidden"},children:(0,c.jsxs)("div",{className:"row",children:[(0,c.jsxs)("div",{className:"col-8",style:{height:"80vh",overflow:"auto"},children:[(0,c.jsxs)("p",{className:"d-flex align-items-center gap-2",children:[(0,c.jsx)(k.OLK,{title:"back",style:{cursor:"pointer"},onClick:()=>e("/admin/svideos"),size:20}),"Edit Video"]}),(0,c.jsx)("div",{className:"row text-muted",children:(0,c.jsxs)(n.A,{onSubmit:e=>{(async e=>{e.preventDefault(),pe(!0);try{const e=new FormData;e.append("image",ie),e.append("videoId",ge.video_id),e.append("uploadType",t),e.append("selectedCallNowType",u),e.append("videURL",ue.videURL),e.append("videoTitle",ue.videoTitle),e.append("cta_type",l),e.append("tollfree_or_phone",u),e.append("ctaButton",JSON.stringify({cta_btn_text:ue.ctaBtn,cta_bg_color:v,cta_text_color:f})),e.append("selectedPlylist",fe(G,"id")),e.append("connected_products",fe(r,"productId")),e.append("videoType",ue.videoType),e.append("video_duration",ue.videLength),e.append("country",P(d)),e.append("number",oe),e.append("brandId",X.brand_id),e.append("productUrl",ue.pageUrl),await I.A.patch("https://liveshopping.asia/updateVideoData",e,{headers:{"Content-Type":"multipart/form-data"}}).then((e=>{pe(!1),U.oR.success("Swirl updated successfully!")})).catch((e=>{console.log(e),pe(!1),U.oR.error("Something went wrong !")}))}catch(s){console.log(s),U.oR.error("Something went wrong !")}})(e)},children:[(0,c.jsxs)("label",{className:"mt-3",children:["Title ",(0,c.jsx)("sup",{className:"text-danger",children:"*"})]}),(0,c.jsx)(n.A.Control,{type:"text",className:"mt-2",placeholder:"Enter video title",value:ue.videoTitle,name:"videoTitle",onChange:e=>{ye(e)},required:!0}),(0,c.jsxs)("div",{className:"d-flex mt-3",children:[(0,c.jsx)(n.A.Check,{type:"radio",label:"Connect products",name:"connect_product",id:"connect_product",value:"0",checked:"0"===l,onChange:we}),(0,c.jsx)(n.A.Check,{type:"radio",label:"Add URL",name:"add_url",id:"add_url",value:"1",className:"ms-3",checked:"1"===l,onChange:we}),(0,c.jsx)(n.A.Check,{type:"radio",label:"Call now",name:"c_now",id:"c_now",value:"2",className:"ms-3",checked:"2"===l,onChange:we})]}),(0,c.jsxs)("div",{children:["0"===l&&(0,c.jsx)(B.A,{data:se,selectedItems:r,setSelectedItems:i}),"1"===l&&(0,c.jsx)(n.A.Control,{type:"text",className:"form-control mt-3",placeholder:"Add page URL",name:"pageUrl",value:ue.pageUrl,onChange:e=>{ye(e)}}),"2"===l&&(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("div",{className:"row mt-3",children:[(0,c.jsx)("div",{className:"col-3",children:(0,c.jsxs)(n.A.Select,{"aria-label":"select call now type",className:"text-muted",onChange:e=>{h(e.target.value)},children:[(0,c.jsx)("option",{selected:"0"===u,value:"0",children:"Toll-free"}),(0,c.jsx)("option",{selected:"1"===u,value:"1",children:"Phone number"})]})}),(0,c.jsx)("div",{className:"col-9",children:"0"==u?(0,c.jsx)(n.A.Control,{type:"number",value:oe,onChange:e=>re(e.target.value),placeholder:"0"==u?"Enter toll-free number":"Enter phone number","aria-label":"Text input with dropdown button"}):(0,c.jsxs)(x,{className:"mb-3 country_btn",children:[(0,c.jsxs)(C,{variant:"outline-dark",title:d,className:"country_btn",onSelect:e=>{p(e)},style:{border:"1px solid red"},children:[(0,c.jsx)(g.A.Item,{eventKey:"US",children:"US"}),(0,c.jsx)(g.A.Item,{eventKey:"IN",children:"IN"}),(0,c.jsx)(g.A.Item,{eventKey:"AU",children:"AU"})]}),(0,c.jsx)(n.A.Control,{type:"number",value:oe,placeholder:"0"==u?"Enter toll-free number":"Enter phone number","aria-label":"Text input with dropdown button",onChange:e=>re(e.target.value)})]})})]})}),(0,c.jsx)("p",{className:"mt-3",children:"Overlay CTA button"}),(0,c.jsxs)("div",{className:"row mt-2",children:[(0,c.jsx)("div",{className:"col-4",children:(0,c.jsx)("input",{type:"text",value:ue.ctaBtn,placeholder:"Enquire now",className:"form-control",name:"ctaBtn",onChange:e=>ye(e)})}),(0,c.jsxs)("div",{className:"col-4",children:[(0,c.jsxs)("div",{className:"input-group mb-3",children:[(0,c.jsx)("span",{className:"input-group-text",children:(0,c.jsx)("span",{className:"color_badge",style:{backgroundColor:v}})}),(0,c.jsx)("input",{type:"text",value:v,onClick:be,className:"form-control pointer_cursor"}),(0,c.jsx)("span",{className:"input-group-text pointer_cursor",onClick:be,children:(0,c.jsx)(_.dJp,{})})]}),b&&(0,c.jsx)("div",{ref:J,style:{position:"absolute",zIndex:"2"},children:(0,c.jsx)(S.xk,{color:v,onChange:e=>{m(e.hex)}})})]}),(0,c.jsxs)("div",{className:"col-4",children:[(0,c.jsxs)("div",{className:"input-group mb-3",children:[(0,c.jsx)("span",{className:"input-group-text",children:(0,c.jsx)("span",{className:"color_badge",style:{backgroundColor:f}})}),(0,c.jsx)("input",{type:"text",value:f,onClick:Ne,className:"form-control pointer_cursor"}),(0,c.jsx)("span",{className:"input-group-text pointer_cursor",onClick:Ne,children:(0,c.jsx)(_.dJp,{})})]}),N&&(0,c.jsx)("div",{ref:K,style:{position:"absolute",zIndex:"2"},children:(0,c.jsx)(S.xk,{color:f,onChange:e=>{j(e.hex)}})})]})]})]}),(0,c.jsx)("p",{children:"Select playlist"}),(0,c.jsx)(D.A,{data:ee,selectedPlalist:G,setselectedPlalist:H}),(0,c.jsx)("p",{className:"mt-2",children:"Cover image"}),(0,c.jsx)("div",{className:"input-group ",children:(0,c.jsx)(n.A.Control,{ref:Ce,type:"file",accept:"image/*",placeholder:"Select an image file","data-browse":"Browse",onChange:e=>{const t=e.target.files[0];if(t){de(t);const e=new FileReader;e.onloadend=()=>{const t=e.result;Q(t)},e.readAsDataURL(t)}}})}),(0,c.jsx)("small",{children:"File format: .png, .jpg, .webp"}),Z&&(0,c.jsx)(c.Fragment,{children:(0,c.jsx)("div",{className:"card p-2 col-4 mt-4 m-auto",children:(0,c.jsx)("img",{alt:"preview",className:"rounded",src:Z})})}),(0,c.jsx)("div",{children:(0,c.jsxs)("button",{className:"btn btn-sm mt-3 btn-dark",children:["Update ",ce?(0,c.jsx)(A.hW,{className:"spinning"}):""]})})]})})]}),(0,c.jsx)("div",{className:"col-4",children:(0,c.jsx)("div",{className:"card",style:{height:"80vh",padding:"50px",paddingTop:"20px",borderRadius:"20px",overflow:"hidden",backgroundColor:"#F8F8FF",borderRadius:"10px"},children:(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{style:{position:"relative",height:"70vh",maxWidth:"100%",overflow:"hidden",borderRadius:"20px"},children:[F?(0,c.jsx)("video",{ref:je,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover"},src:F,autoPlay:!0,muted:!0}):(0,c.jsx)("div",{className:"h-100 w-100",style:{backgroundColor:"#D9D9D9"}}),R&&(0,c.jsx)("div",{style:{position:"absolute",top:0,right:0,padding:"10px",color:"white"},onClick:()=>{E(null),V(null)},children:(0,c.jsx)("span",{style:{height:"34px",width:"34px",backgroundColor:"#a2a2a4",cursor:"pointer",borderRadius:"50%",display:"grid",placeItems:"center"},children:(0,c.jsx)(k.id1,{className:" float-end"})})}),(0,c.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",color:"white"},children:(0,c.jsx)("div",{style:{backgroundColor:"#ffffff",height:"44px",width:"44px",display:"grid",placeItems:"center",borderRadius:"50%"},children:(0,c.jsx)(A.gSK,{size:20,className:"ps-1 pointer_cursor",color:"#09121F"})})}),r.length>0&&(0,c.jsx)("div",{className:"w-100 p-3",style:{position:"absolute",bottom:"0"},children:(0,c.jsx)("div",{className:"d-flex bg-light rounded overflow-hidden",style:{boxShadow:"0px 4px 4px 0px #00000040"}})})]}),(0,c.jsx)("div",{className:"text-center",children:(0,c.jsx)("button",{className:"btn btn-dark mt-2",disabled:!Z,onClick:()=>M(!0),children:"Preview"})})]})})}),(0,c.jsx)(O.A,{show:z,url:F,handleClose:()=>{M(!1)}})]})})}},95365:()=>{}}]);
//# sourceMappingURL=113.1f61162b.chunk.js.map