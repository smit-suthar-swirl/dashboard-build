"use strict";(self.webpackChunkswirl_dashboard=self.webpackChunkswirl_dashboard||[]).push([[719],{96719:(e,t,a)=>{a.r(t),a.d(t,{default:()=>k});var s=a(65043),l=a(41591),o=a(58786),n=a(13172),i=a(86347),r=a(60184),d=a(36505),c=a(70579);const h=e=>{let{show:t,handleClose:a,data:s}=e;return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(d.A,{show:t,className:"d-grid modal_video",size:"lg",onHide:a,children:(0,c.jsx)(d.A.Body,{children:(0,c.jsxs)("div",{className:"row m-0 p-0",children:[(0,c.jsx)("div",{className:"col-6",children:(0,c.jsxs)("video",{className:"modal_video",controls:!0,width:"600",height:"400",autoPlay:!0,loop:!0,children:[(0,c.jsx)("source",{src:s.url,type:"video/mp4"}),"Your browser does not support the video tag."]})}),(0,c.jsxs)("div",{className:"col-6 m-0 ",children:[(0,c.jsxs)("div",{className:"p-2 mt-1 m-0 d-flex",children:[(0,c.jsx)("img",{alt:"productmini",src:"https://cdn.shopify.com/s/files/1/0088/4031/4931/files/39_f63c01f8-48d6-41b8-8066-1026f6f98e60.jpg?v=1702991482",className:"rounded",style:{height:"60px",width:"60px"}}),(0,c.jsxs)("div",{className:"ps-2",children:[(0,c.jsxs)("h6",{className:"mb-0",children:[s.video_title," 1"]}),(0,c.jsx)("p",{className:"prouct_desc",children:"Here descc"})]})]}),(0,c.jsxs)("div",{className:"p-2 mt-1 m-0 d-flex border-top",children:[(0,c.jsx)("img",{alt:"productmini",src:"https://cdn.shopify.com/s/files/1/0088/4031/4931/files/39_f63c01f8-48d6-41b8-8066-1026f6f98e60.jpg?v=1702991482",className:"rounded",style:{height:"60px",width:"60px"}}),(0,c.jsxs)("div",{className:"ps-2",children:[(0,c.jsxs)("h6",{className:"mb-0",children:[s.video_title," 2"]}),(0,c.jsx)("p",{className:"prouct_desc",children:"Here descc"})]})]}),(0,c.jsxs)("div",{className:"p-2 mt-1 m-0 d-flex border-top",children:[(0,c.jsx)("img",{alt:"productmini",src:"https://cdn.shopify.com/s/files/1/0088/4031/4931/files/39_f63c01f8-48d6-41b8-8066-1026f6f98e60.jpg?v=1702991482",className:"rounded",style:{height:"60px",width:"60px"}}),(0,c.jsxs)("div",{className:"ps-2",children:[(0,c.jsxs)("h6",{className:"mb-0",children:[s.video_title," 3"]}),(0,c.jsx)("p",{className:"prouct_desc",children:"Here descc"})]})]})]})]})})})})};var m=a(11238),p=a(72450),u=a(37762),x=(a(20557),a(77154)),g=a(83003),b=a(31121),v=a(31462),j=a(49804),w=a(55508);const y=e=>{let{show:t,handleClose:a,data:l}=e;const[n,i]=(0,s.useState)([]),[r,h]=s.useState(!1),u=[{name:"Video Title",selector:e=>l.video_title},{name:"Name",selector:e=>e.name},{name:"Date",selector:e=>l.date},{name:"Mobile",selector:e=>e.mobile},{name:"Message",selector:e=>e.message}];(0,s.useEffect)((()=>{t&&async function(){h(!0);try{let e=new FormData;e.append("brand_id",l.brand_id),e.append("start_date",(0,b.GP)(l.startDate,"yyyy-MM-dd")),e.append("end_date",(0,b.GP)(l.endDate,"yyyy-MM-dd")),e.append("video_id",l.video_id),await x.A.post("https://bigleap.live/index.php/APIv1/ShortVideoAnalytics/getAskquestion",e).then((e=>{i(e.data.data),h(!1)})).catch((e=>{console.log(e),h(!1)}))}catch(e){throw h(!1),e}}(l.date)}),[l.date]);return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)(d.A,{show:t,className:"d-grid w-100 askquestion_modal ",size:"lg",onHide:a,children:[(0,c.jsxs)(d.A.Title,{className:"p-3 pb-0",children:["Asked Questions ",(0,c.jsx)(v.Blb,{style:{cursor:"pointer"},title:"These are raised questions asked by viewers on video or product"}),(0,c.jsxs)("button",{className:"btn btn-sm btn-outline-dark float-end",onClick:()=>(()=>{const e=m.Wp.json_to_sheet(n),t=m.Wp.book_new();m.Wp.book_append_sheet(t,e,"Sheet1");const a=m.M9(t,{bookType:"xlsx",type:"array"});(0,p.saveAs)(new Blob([a],{type:"application/octet-stream"}),"askQuestData.xlsx")})(),children:[(0,c.jsx)("span",{className:"mt-3",children:"Export"})," ",(0,c.jsx)(j.w4m,{size:25})]}),(0,c.jsx)("hr",{})]}),(0,c.jsx)(d.A.Body,{className:"p-3 pt-0",children:(0,c.jsx)(o.Ay,{columns:u,data:n,progressPending:r,progressComponent:(0,c.jsx)("div",{className:"p-3 m-4",children:(0,c.jsx)(w.IN,{height:30,width:30,strokeColor:"grey"})})})})]})})};var _=a(3825);const N=()=>{const e=new Date,t=new Date(e),[a,l]=(0,s.useState)(!1),[d,v]=(0,s.useState)([]),[N,f]=(0,s.useState)(!1),[k,C]=(0,s.useState)([]),[D,A]=(0,s.useState)([]),[T,S]=(0,s.useState)(""),[V,I]=(0,s.useState)(!1),[M,F]=s.useState(!1),W=(0,g.d4)((e=>e.auth.user)),[E,R]=(0,s.useState)([]);t.setDate(e.getDate()-1);const[H,B]=(0,s.useState)([{startDate:new Date(e.getTime()-6048e5),endDate:t,key:"selection"}]),[P,Q]=(0,s.useState)(!1);const q=[{selector:e=>e.index+1,sortable:!0,width:"4%"},{name:"Video Title",selector:e=>e.video_title,sortable:!0,width:"22.2%",cell:e=>(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("p",{className:"pt-4",title:e.video_title,style:{padding:"2px",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",cursor:"pointer"},onClick:()=>{v(e),l(!0)},children:[e.video_title?e.video_title:"no title"," "]}),(0,c.jsxs)("span",{onClick:()=>{v(e),l(!0)},style:{cursor:"pointer"},children:["  ",(0,c.jsx)(_.o0O,{size:20,className:"ms-1"})]})]})},{name:"Total Views",selector:e=>e.total_views,sortable:!0,style:{backgroundColor:"rgba(255, 0, 0,.1)"}},{name:"Unique  Views",selector:e=>e.total_unique_views,sortable:!0,style:{backgroundColor:"rgba(255, 0, 0,.1)"}},{name:"Watch Time ",selector:e=>e.total_watchtime,sortable:!0,style:{backgroundColor:"rgba(255, 0, 0,.1)"}},{name:"Avg. Watch Time",selector:e=>Math.round(e.average_watchtime),sortable:!0,style:{backgroundColor:"rgba(255, 0, 0,.1)"}},{name:"Engage. Rate %",selector:e=>null===e.engagement_rate?"".concat("0%"):"".concat(Math.round(e.engagement_rate),"%"),sortable:!0,style:{backgroundColor:"rgba(0, 255, 71, .1)"}},{name:"CTR%",selector:e=>"".concat(Math.round(e.ctr),"%"),sortable:!0,style:{backgroundColor:"rgba(0, 255, 71, .1)"}},{name:"Add To Cart",selector:e=>e.addtoCart,sortable:!0,style:{backgroundColor:"rgba(0, 255, 71, .1)"}},{name:"Buy Now",selector:e=>e.buyNow,sortable:!0,style:{backgroundColor:"rgba(0, 255, 71, .1)"}},{name:"Ask Question",selector:e=>e.askQuestion,sortable:!0,style:{backgroundColor:"rgba(0, 255, 71, .1)"},cell:e=>e.askQuestion>0?(0,c.jsx)("p",{onClick:()=>{f(!0),C(e)},style:{cursor:"pointer"},children:(0,c.jsx)("span",{className:"badge_ask_count",children:e.askQuestion})}):(0,c.jsx)("p",{style:{padding:"3px 5px"},children:e.askQuestion})}],U=()=>(0,c.jsx)(c.Fragment,{children:(0,c.jsx)("div",{className:"ms-3",children:(0,c.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,c.jsx)("path",{d:"M13.3333 2.6665V10.6665H15.3333L12.6667 13.9998L10 10.6665H12V2.6665H13.3333ZM8 11.9998V13.3332H2V11.9998H8ZM9.33333 7.33317V8.6665H2V7.33317H9.33333ZM9.33333 2.6665V3.99984H2V2.6665H9.33333Z",fill:"#09121F"})})})}),Y=(0,s.useCallback)((async()=>{F(!0);try{await x.A.get("https://goswirl.world:3001/getAnalyticsDataByBrandIdAndDate?brand_id=".concat(null===W||void 0===W?void 0:W.brand_id,"&start_date=").concat((0,b.GP)(H[0].startDate,"yyyy-MM-dd"),"&end_date=").concat((0,b.GP)(H[0].endDate,"yyyy-MM-dd"))).then((e=>{R(e.data.resp),e.data&&F(!1)})).catch((e=>{console.log(e),F(!1)}))}catch(e){console.log(e)}}),[W.brand_id,H]);return(0,s.useEffect)((()=>{I(""!==T)}),[T]),(0,s.useEffect)((()=>{Y(),(()=>{let e=0,t=0;E&&E.map((a=>{e+=parseInt(a.total_views),t+=parseInt(a.total_watchtime)}))})()}),[H,Y]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"d-flex",children:(0,c.jsx)("div",{className:"ms-auto d-flex align-items-center mb-3",children:(0,c.jsxs)("div",{className:"dropdown d-flex",children:[(0,c.jsxs)("div",{className:"input-group input-group me-1",children:[(0,c.jsx)("span",{className:"input-group-text border-end-0 border-dark",children:(0,c.jsx)(r.KSO,{})}),(0,c.jsx)("input",{type:"search",className:"form-control border-start-0 border-dark",name:"search",value:T,placeholder:"Search video...",onChange:e=>(e=>{S(e);const t=E.filter((e=>e.video_title&&e.video_title.toLowerCase().includes(T.toLowerCase())));A(t),console.log(E)})(e.target.value)})]}),(0,c.jsxs)(n.A,{show:P,onToggle:()=>Q(!P),children:[window.innerWidth>556?(0,c.jsx)(n.A.Toggle,{id:"dropdown-basic",className:"bg-transparent text-dark border-dark",children:(0,c.jsx)("span",{children:null!==H[0].endDate?"".concat(H[0].startDate.toString().slice(4,15)," to ").concat(H[0].endDate.toString().slice(4,15)):"Filter by date"})}):(0,c.jsx)(n.A.Toggle,{id:"dropdown-basic",className:"bg-transparent text-dark border-dark",children:(0,c.jsx)("span",{children:null!==H[0].endDate?"".concat(H[0].startDate.getFullYear().toString().slice(2,4),"/").concat(H[0].startDate.getFullYear().toString().slice(2,4),"/").concat(H[0].startDate.getFullYear().toString().slice(2,4)," - ").concat(H[0].startDate.getFullYear().toString().slice(2,4),"/").concat(H[0].startDate.getFullYear().toString().slice(2,4),"/").concat(H[0].startDate.getFullYear().toString().slice(2,4)):"Filter by date"})}),(0,c.jsxs)(n.A.Menu,{children:[(0,c.jsx)(i.Ur,{editableDateInputs:!1,onChange:e=>B([e.selection]),moveRangeOnFirstSelection:!0,ranges:H,months:2,direction:"horizontal",maxDate:t,minDate:"236633565"==(null===W||void 0===W?void 0:W.brand_id)?new Date(2024,2,15):new Date(2024,3,5)}),(0,c.jsxs)("div",{className:"w-100",children:[(0,c.jsx)("button",{id:"dropdown-basic",className:"btn btn-sm btn-primary float-end me-3",onClick:()=>{Q(!1)},children:"Done"}),(0,c.jsx)("button",{id:"dropdown-basic",className:"btn btn-sm btn-outline-primary float-end me-3",onClick:()=>{B([{startDate:new Date(e.getTime()-6048e5),endDate:t,key:"selection"}])},children:"Reset"})]})]})]}),(0,c.jsxs)(n.A,{className:"ms-1",children:[window.innerWidth>556?(0,c.jsx)(n.A.Toggle,{className:"bg-transparent text-dark border-dark",children:"Export"}):(0,c.jsx)(n.A.Toggle,{className:"bg-transparent text-dark border-dark",children:(0,c.jsx)(j.w4m,{})}),(0,c.jsxs)(n.A.Menu,{children:[(0,c.jsxs)(n.A.Item,{onClick:()=>{const e=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-";return e.hasOwnProperty(t)?e[t]:a};let t=["Total Unique Views","Video Title","Brand Id","Video Id","Total Watch Time","Id","Url","Duration","Total Views","Date","Buy Now","Add To Cart","Ask Questions","Average Watch time","Engagement Rate","CTR"].join(",")+"\n";E.forEach((a=>{const s=[e(a,"total_unique_views"),e(a,"video_title"),e(a,"brand_id"),e(a,"video_id"),e(a,"total_watchtime"),e(a,"id"),e(a,"url"),e(a,"duration"),e(a,"total_views"),e(a,"date"),e(a,"buyNow"),e(a,"addtoCart"),e(a,"askQuestion"),e(a,"average_watchtime"),e(a,"engagement_rate"),e(a,"ctr")];t+=s.join(",")+"\n"}));const a=new Blob([t],{type:"text/csv;charset=utf-8;"});(0,p.saveAs)(a,"data.csv")},children:[(0,c.jsx)(r.QaY,{color:"gray"})," Export as CSV "]}),(0,c.jsxs)(n.A.Item,{onClick:()=>{const e=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-";return e.hasOwnProperty(t)?e[t]:a},t=[["Total Unique Views","Video Title","Brand Id","Video Id","Total Watch Time","Id","Url","Duration","Total Views","Date","Buy Now","Add To Cart","Ask Questions","Average Watch time","Engagement Rate","CTR"],...E.map((t=>[e(t,"total_unique_views"),e(t,"video_title"),e(t,"brand_id"),e(t,"video_id"),e(t,"total_watchtime"),e(t,"id"),e(t,"url"),e(t,"duration"),e(t,"total_views"),e(t,"date"),e(t,"buyNow"),e(t,"addtoCart"),e(t,"askQuestion"),e(t,"average_watchtime"),e(t,"engagement_rate"),e(t,"ctr")]))],a=m.Wp.aoa_to_sheet(t),s=m.Wp.book_new();m.Wp.book_append_sheet(s,a,"Sheet1");const l=m.M9(s,{bookType:"xlsx",type:"array"});(0,p.saveAs)(new Blob([l],{type:"application/octet-stream"}),"data.xlsx")},children:[(0,c.jsx)(r.Ru,{color:"green"})," Export as XLS"]}),(0,c.jsxs)(n.A.Item,{onClick:()=>{const e=new u.default("l","pt","a4",!0),t=["Total Unique Views","Video Title","Brand Id","Video Id","Total Watch Time","Id","Url","Duration","Total Views","Date","Buy Now","Add To Cart","Ask Questions","Average Watch time","Engagement Rate","CTR"],a=["total_unique_views","video_title","brand_id","video_id","total_watchtime","id","url","duration","total_views","date","buyNow","addtoCart","askQuestion","average_watchtime","engagement_rate","ctr"],s=[t];E.forEach((e=>{const t=a.map((t=>function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-";return e.hasOwnProperty(t)?e[t]:a}(e,t)));s.push(t)})),e.autoTable({head:[t],body:s.slice(1),headStyles:{fillColor:[238,238,119],textColor:[0,0,0]},styles:{cellPadding:1,fontSize:5},columnStyles:{0:{cellWidth:"auto"}},margin:{top:20},startY:20}),e.save("data.pdf")},children:[(0,c.jsx)(r.kl1,{color:"red"})," Export as PDF"]})]})]})]})})}),(0,c.jsx)("div",{style:{width:"100%",overflow:"auto",height:"auto"},children:(0,c.jsx)("div",{style:{border:"1px solid #E0E0E0",minWidth:"1500px"},children:(0,c.jsx)(o.Ay,{columns:q,data:V?null===D||void 0===D?void 0:D.map(((e,t)=>({...e,index:t}))):null===E||void 0===E?void 0:E.map(((e,t)=>({...e,index:t}))),subHeader:!0,progressPending:M,pagination:!0,progressComponent:(0,c.jsx)("div",{className:"p-3 m-4",children:(0,c.jsx)(w.IN,{height:30,width:30,strokeColor:"grey"})}),sortIcon:(0,c.jsx)(U,{}),highlightOnHover:!0,className:"custom-datatable",subHeaderComponent:(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("div",{className:"d-flex w-100 table_header_row",children:[(0,c.jsx)("div",{className:"table_blank_column"}),(0,c.jsx)("div",{className:"table_higher_column",children:(0,c.jsxs)("div",{className:"d-flex text-center",children:[(0,c.jsx)("div",{className:"perfomance_column",children:"Performance"}),(0,c.jsx)("div",{className:"engagement_column",children:"Engagement"})]})})]})})})})}),(0,c.jsx)(h,{show:a,handleClose:()=>l(!1),data:d}),(0,c.jsx)(y,{show:N,handleClose:()=>f(!1),data:{...k,...H[0]}})]})},f=()=>(0,c.jsx)("div",{children:(0,c.jsxs)("div",{className:"row",children:[(0,c.jsx)("div",{className:"col-9",children:"2"}),(0,c.jsx)("div",{className:"col-3",children:"3"})]})}),k=()=>(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(l.m,{children:(0,c.jsx)("title",{children:"SWIRL | Short Videos"})}),(0,c.jsx)("div",{children:(0,c.jsxs)("div",{className:"col",children:[(0,c.jsxs)("div",{className:"d-flex",children:[(0,c.jsx)("ul",{className:"nav nav-tabs",id:"responsive-tabs",role:"tablist",children:(0,c.jsx)("li",{className:"nav-item",role:"presentation",children:(0,c.jsx)("button",{className:"nav-link active",id:"Reports-tab","data-bs-toggle":"tab","data-bs-target":"#Reports",type:"button",role:"tab","aria-controls":"Reports","aria-selected":"false",children:"Reports"})})}),(0,c.jsx)("div",{className:"ms-auto d-flex align-items-center"})]}),(0,c.jsxs)("div",{className:"tab-content p-3",id:"responsive-tabs-content",children:[(0,c.jsx)("div",{className:"tab-pane fade ",id:"video",role:"tabpanel","aria-labelledby":"video-tab",children:(0,c.jsx)("p",{children:"video"})}),(0,c.jsx)("div",{className:"tab-pane fade",id:"Upload",role:"tabpanel","aria-labelledby":"Upload-tab",children:(0,c.jsx)(f,{})}),(0,c.jsx)("div",{className:"tab-pane fade",id:"playlist",role:"tabpanel","aria-labelledby":"playlist-tab",children:(0,c.jsx)("p",{children:"playlist"})}),(0,c.jsx)("div",{className:"tab-pane fade show active",id:"Reports",role:"tabpanel","aria-labelledby":"Reports-tab",children:(0,c.jsx)(N,{})}),(0,c.jsx)("div",{className:"tab-pane fade",id:"Settings",role:"tabpanel","aria-labelledby":"Settings-tab",children:(0,c.jsx)("p",{children:"Settings"})})]})]})})]})}}]);
//# sourceMappingURL=719.b017ada5.chunk.js.map