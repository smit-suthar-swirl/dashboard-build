"use strict";(self.webpackChunkswirl_dashboard=self.webpackChunkswirl_dashboard||[]).push([[719],{96719:(e,t,a)=>{a.r(t),a.d(t,{default:()=>C});var s=a(65043),l=a(41591),o=a(58786),n=a(13172),r=a(86347),i=a(60184),d=a(36505),c=a(70579);const h=e=>{let{show:t,handleClose:a,data:s}=e;return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(d.A,{show:t,className:"d-grid modal_video",size:"lg",onHide:a,children:(0,c.jsx)(d.A.Body,{children:(0,c.jsx)("div",{className:"row m-0 p-0",children:(0,c.jsx)("div",{style:{maxWidth:"400px",margin:"0",padding:"0"},children:(0,c.jsxs)("video",{className:"modal_video",controls:!0,width:"600",height:"400",autoPlay:!0,loop:!0,children:[(0,c.jsx)("source",{src:s.url,type:"video/mp4"}),"Your browser does not support the video tag."]})})})})})})};var m=a(11238),p=a(72450),g=a(37762),u=(a(20557),a(77154)),x=a(83003),b=a(31121),v=a(31462),w=a(49804),j=a(55508);const y=e=>{let{show:t,handleClose:a,data:l}=e;const[n,r]=(0,s.useState)([]),[i,h]=s.useState(!1),g=[{name:"Video Title",selector:e=>l.video_title},{name:"Name",selector:e=>e.name},{name:"Date",selector:e=>l.date},{name:"Mobile",selector:e=>e.mobile},{name:"Message",selector:e=>e.message}];(0,s.useEffect)((()=>{t&&async function(){h(!0);try{let e=new FormData;e.append("brand_id",l.brand_id),e.append("start_date",(0,b.GP)(l.startDate,"yyyy-MM-dd")),e.append("end_date",(0,b.GP)(l.endDate,"yyyy-MM-dd")),e.append("video_id",l.video_id),await u.A.post("https://bigleap.live/index.php/APIv1/ShortVideoAnalytics/getAskquestion",e).then((e=>{r(e.data.data),h(!1)})).catch((e=>{console.log(e),h(!1)}))}catch(e){throw h(!1),e}}(l.date)}),[l.date]);return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)(d.A,{show:t,className:"d-grid w-100 askquestion_modal ",size:"lg",onHide:a,children:[(0,c.jsxs)(d.A.Title,{className:"p-3 pb-0",children:["Asked Questions ",(0,c.jsx)(v.Blb,{style:{cursor:"pointer"},title:"These are raised questions asked by viewers on video or product"}),(0,c.jsxs)("button",{className:"btn btn-sm btn-outline-dark float-end",onClick:()=>(()=>{const e=m.Wp.json_to_sheet(n),t=m.Wp.book_new();m.Wp.book_append_sheet(t,e,"Sheet1");const a=m.M9(t,{bookType:"xlsx",type:"array"});(0,p.saveAs)(new Blob([a],{type:"application/octet-stream"}),"askQuestData.xlsx")})(),children:[(0,c.jsx)("span",{className:"mt-3",children:"Export"})," ",(0,c.jsx)(w.w4m,{size:25})]}),(0,c.jsx)("hr",{})]}),(0,c.jsx)(d.A.Body,{className:"p-3 pt-0",children:(0,c.jsx)(o.Ay,{columns:g,data:n,progressPending:i,progressComponent:(0,c.jsx)("div",{className:"p-3 m-4",children:(0,c.jsx)(j.IN,{height:30,width:30,strokeColor:"grey"})})})})]})})};var _=a(3825);const k=()=>{const e=new Date,t=new Date(e),[a,l]=(0,s.useState)(!1),[d,v]=(0,s.useState)([]),[k,N]=(0,s.useState)(!1),[C,S]=(0,s.useState)([]),[f,A]=(0,s.useState)([]),[D,T]=(0,s.useState)(""),[V,M]=(0,s.useState)(!1),[W,F]=s.useState(!1),E=(0,x.d4)((e=>e.auth.user)),[R,H]=(0,s.useState)([]);t.setDate(e.getDate()-1);const[P,Q]=(0,s.useState)([{startDate:new Date(e.getTime()-6048e5),endDate:t,key:"selection"}]),[B,I]=(0,s.useState)(!1);const q=[{selector:e=>e.index+1,sortable:!0,width:"4%"},{name:"Video Title",selector:e=>e.video_title,sortable:!0,width:"22.2%",cell:e=>(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("p",{className:"pt-4",title:e.video_title,style:{padding:"2px",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",cursor:"pointer"},onClick:()=>{v(e),l(!0)},children:[e.video_title?e.video_title:"no title"," "]}),(0,c.jsxs)("span",{onClick:()=>{v(e),l(!0)},style:{cursor:"pointer"},children:["  ",(0,c.jsx)(_.o0O,{size:20,className:"ms-1"})]})]})},{name:"Total Views",selector:e=>e.total_views,sortable:!0,style:{backgroundColor:"rgba(255, 0, 0,.1)"}},{name:"Unique  Views",selector:e=>e.total_unique_views,sortable:!0,style:{backgroundColor:"rgba(255, 0, 0,.1)"}},{name:"Watch Time [Secs]",selector:e=>e.total_watchtime,sortable:!0,style:{backgroundColor:"rgba(255, 0, 0,.1)"}},{name:"Avg. Watch Time [Secs]",selector:e=>Math.round(e.average_watchtime),sortable:!0,style:{backgroundColor:"rgba(255, 0, 0,.1)"}},{name:"Engage. Rate %",selector:e=>null===e.engagement_rate?"".concat("0%"):"".concat(Math.round(e.engagement_rate),"%"),sortable:!0,style:{backgroundColor:"rgba(0, 255, 71, .1)"}},{name:"CTR%",selector:e=>"".concat(Math.round(e.ctr_rate),"%"),sortable:!0,style:{backgroundColor:"rgba(0, 255, 71, .1)"}},{name:"Add To Cart",selector:e=>e.addtoCart,sortable:!0,style:{backgroundColor:"rgba(0, 255, 71, .1)"}},{name:"Buy Now",selector:e=>e.buyNow,sortable:!0,style:{backgroundColor:"rgba(0, 255, 71, .1)"}},{name:"Ask Question",selector:e=>e.askQuestion,sortable:!0,style:{backgroundColor:"rgba(0, 255, 71, .1)"},cell:e=>e.askQuestion>0?(0,c.jsx)("p",{onClick:()=>{N(!0),S(e)},style:{cursor:"pointer"},children:(0,c.jsx)("span",{className:"badge_ask_count",children:e.askQuestion})}):(0,c.jsx)("p",{style:{padding:"3px 5px"},children:e.askQuestion})}],Y=()=>(0,c.jsx)(c.Fragment,{children:(0,c.jsx)("div",{className:"ms-3",children:(0,c.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,c.jsx)("path",{d:"M13.3333 2.6665V10.6665H15.3333L12.6667 13.9998L10 10.6665H12V2.6665H13.3333ZM8 11.9998V13.3332H2V11.9998H8ZM9.33333 7.33317V8.6665H2V7.33317H9.33333ZM9.33333 2.6665V3.99984H2V2.6665H9.33333Z",fill:"#09121F"})})})}),O=(0,s.useCallback)((async()=>{F(!0);try{await u.A.get("https://goswirl.world:3001/getAnalyticsDataByBrandIdAndDate?brand_id=".concat(null===E||void 0===E?void 0:E.brand_id,"&start_date=").concat((0,b.GP)(P[0].startDate,"yyyy-MM-dd"),"&end_date=").concat((0,b.GP)(P[0].endDate,"yyyy-MM-dd"))).then((e=>{H(e.data.resp),e.data&&F(!1)})).catch((e=>{console.log(e),F(!1)}))}catch(e){console.log(e)}}),[E.brand_id,P]);return(0,s.useEffect)((()=>{M(""!==D)}),[D]),(0,s.useEffect)((()=>{O(),(()=>{let e=0,t=0;R&&R.map((a=>{e+=parseInt(a.total_views),t+=parseInt(a.total_watchtime)}))})()}),[P,O]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"d-flex",children:(0,c.jsx)("div",{className:"ms-auto d-flex align-items-center mb-3",children:(0,c.jsxs)("div",{className:"dropdown d-flex",children:[(0,c.jsxs)("div",{className:"input-group input-group me-1",children:[(0,c.jsx)("span",{className:"input-group-text border-end-0 border-dark",children:(0,c.jsx)(i.KSO,{})}),(0,c.jsx)("input",{type:"search",className:"form-control border-start-0 border-dark",name:"search",value:D,placeholder:"Search video...",onChange:e=>(e=>{T(e);const t=R.filter((e=>e.video_title&&e.video_title.toLowerCase().includes(D.toLowerCase())));A(t),console.log(R)})(e.target.value)})]}),(0,c.jsxs)(n.A,{show:B,onToggle:()=>I(!B),children:[window.innerWidth>556?(0,c.jsx)(n.A.Toggle,{id:"dropdown-basic",className:"bg-transparent text-dark border-dark",children:(0,c.jsx)("span",{children:null!==P[0].endDate?"".concat(P[0].startDate.toString().slice(4,15)," to ").concat(P[0].endDate.toString().slice(4,15)):"Filter by date"})}):(0,c.jsx)(n.A.Toggle,{id:"dropdown-basic",className:"bg-transparent text-dark border-dark",children:(0,c.jsx)("span",{children:null!==P[0].endDate?"".concat(P[0].startDate.getFullYear().toString().slice(2,4),"/").concat(P[0].startDate.getFullYear().toString().slice(2,4),"/").concat(P[0].startDate.getFullYear().toString().slice(2,4)," - ").concat(P[0].startDate.getFullYear().toString().slice(2,4),"/").concat(P[0].startDate.getFullYear().toString().slice(2,4),"/").concat(P[0].startDate.getFullYear().toString().slice(2,4)):"Filter by date"})}),(0,c.jsxs)(n.A.Menu,{children:[(0,c.jsx)(r.Ur,{editableDateInputs:!1,onChange:e=>Q([e.selection]),moveRangeOnFirstSelection:!0,ranges:P,months:2,direction:"horizontal",maxDate:t,minDate:"236633565"==(null===E||void 0===E?void 0:E.brand_id)?new Date(2024,2,15):new Date(2024,3,5)}),(0,c.jsxs)("div",{className:"w-100",children:[(0,c.jsx)("button",{id:"dropdown-basic",className:"btn btn-sm btn-primary float-end me-3",onClick:()=>{I(!1)},children:"Done"}),(0,c.jsx)("button",{id:"dropdown-basic",className:"btn btn-sm btn-outline-primary float-end me-3",onClick:()=>{Q([{startDate:new Date(e.getTime()-6048e5),endDate:t,key:"selection"}])},children:"Reset"})]})]})]}),(0,c.jsxs)(n.A,{className:"ms-1",children:[window.innerWidth>556?(0,c.jsx)(n.A.Toggle,{className:"bg-transparent text-dark border-dark",children:"Export"}):(0,c.jsx)(n.A.Toggle,{className:"bg-transparent text-dark border-dark",children:(0,c.jsx)(w.w4m,{})}),(0,c.jsxs)(n.A.Menu,{children:[(0,c.jsxs)(n.A.Item,{onClick:()=>{const e=["date","video_title","total_views","total_unique_views","total_watchtime","average_watchtime","buyNow","addtoCart","askQuestion","engagement_rate","ctr_rate"],t=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-";return e.hasOwnProperty(t)?e[t]:a};let a=["Date","Video Title","Total Views","Unique Views","Watch Time [Secs]","Avg Watch Time [Secs]","Buy Now","Add to Cart","Ask Question","Engagement","CTR"].join(",")+"\n";R.forEach((s=>{const l=[t(s,e[0]),t(s,e[1]),t(s,e[2]),t(s,e[3]),t(s,e[4]),t(s,e[5]),t(s,e[6]),t(s,e[7]),t(s,e[8]),t(s,e[9]),t(s,e[10])];a+=l.join(",")+"\n"}));const s=new Blob([a],{type:"text/csv;charset=utf-8;"});(0,p.saveAs)(s,"data.csv")},children:[(0,c.jsx)(i.QaY,{color:"gray"})," Export as CSV "]}),(0,c.jsxs)(n.A.Item,{onClick:()=>{const e=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-";return e.hasOwnProperty(t)?e[t]:a},t=["date","video_title","total_views","total_unique_views","total_watchtime","average_watchtime","buyNow","addtoCart","askQuestion","engagement_rate","ctr_rate"],a=[["Date","Video Title","Total Views","Unique Views","Watch Time [Secs]","Avg Watch Time [Secs]","Buy Now","Add to Cart","Ask Question","Engagement","CTR"],...R.map((a=>[e(a,t[0]),e(a,t[1]),e(a,t[2]),e(a,t[3]),e(a,t[4]),e(a,t[5]),e(a,t[6]),e(a,t[7]),e(a,t[8]),e(a,t[9]),e(a,t[10])]))],s=m.Wp.aoa_to_sheet(a),l=m.Wp.book_new();m.Wp.book_append_sheet(l,s,"Sheet1");const o=m.M9(l,{bookType:"xlsx",type:"array"});(0,p.saveAs)(new Blob([o],{type:"application/octet-stream"}),"data.xlsx")},children:[(0,c.jsx)(i.Ru,{color:"green"})," Export as XLS"]}),(0,c.jsxs)(n.A.Item,{onClick:()=>{const e=new g.default("l","pt","a4",!0),t=["Date","Video Title","Total Views","Unique Views","Watch Time [Secs]","Avg Watch Time [Secs]","Buy Now","Add to Cart","Ask Question","Engagement","CTR"],a=["date","video_title","total_views","total_unique_views","total_watchtime","average_watchtime","buyNow","addtoCart","askQuestion","engagement_rate","ctr_rate"],s=[t];R.forEach((e=>{const t=a.map((t=>function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-";return e.hasOwnProperty(t)?e[t]:a}(e,t)));s.push(t)})),e.autoTable({head:[t],body:s.slice(1),headStyles:{fillColor:[238,238,119],textColor:[0,0,0]},styles:{cellPadding:1,fontSize:5},columnStyles:{0:{cellWidth:"auto"}},margin:{top:20},startY:20}),e.save("data.pdf")},children:[(0,c.jsx)(i.kl1,{color:"red"})," Export as PDF"]})]})]})]})})}),(0,c.jsx)("div",{style:{width:"100%",overflow:"auto",height:"auto"},children:(0,c.jsx)("div",{style:{border:"1px solid #E0E0E0",minWidth:"1500px"},children:(0,c.jsx)(o.Ay,{columns:q,data:V?null===f||void 0===f?void 0:f.map(((e,t)=>({...e,index:t}))):null===R||void 0===R?void 0:R.map(((e,t)=>({...e,index:t}))),subHeader:!0,progressPending:W,pagination:!0,progressComponent:(0,c.jsx)("div",{className:"p-3 m-4",children:(0,c.jsx)(j.IN,{height:30,width:30,strokeColor:"grey"})}),sortIcon:(0,c.jsx)(Y,{}),highlightOnHover:!0,className:"custom-datatable",subHeaderComponent:(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("div",{className:"d-flex w-100 table_header_row",children:[(0,c.jsx)("div",{className:"table_blank_column"}),(0,c.jsx)("div",{className:"table_higher_column",children:(0,c.jsxs)("div",{className:"d-flex text-center",children:[(0,c.jsx)("div",{className:"perfomance_column",children:"Performance"}),(0,c.jsx)("div",{className:"engagement_column",children:"Engagement"})]})})]})})})})}),(0,c.jsx)(h,{show:a,handleClose:()=>l(!1),data:d}),(0,c.jsx)(y,{show:k,handleClose:()=>N(!1),data:{...C,...P[0]}})]})},N=()=>(0,c.jsx)("div",{children:(0,c.jsxs)("div",{className:"row",children:[(0,c.jsx)("div",{className:"col-9",children:"2"}),(0,c.jsx)("div",{className:"col-3",children:"3"})]})}),C=()=>(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(l.m,{children:(0,c.jsx)("title",{children:"SWIRL | Short Videos"})}),(0,c.jsx)("div",{children:(0,c.jsxs)("div",{className:"col",children:[(0,c.jsxs)("div",{className:"d-flex",children:[(0,c.jsx)("ul",{className:"nav nav-tabs",id:"responsive-tabs",role:"tablist",children:(0,c.jsx)("li",{className:"nav-item",role:"presentation",children:(0,c.jsx)("button",{className:"nav-link active",id:"Reports-tab","data-bs-toggle":"tab","data-bs-target":"#Reports",type:"button",role:"tab","aria-controls":"Reports","aria-selected":"false",children:"Reports"})})}),(0,c.jsx)("div",{className:"ms-auto d-flex align-items-center"})]}),(0,c.jsxs)("div",{className:"tab-content p-3",id:"responsive-tabs-content",children:[(0,c.jsx)("div",{className:"tab-pane fade ",id:"video",role:"tabpanel","aria-labelledby":"video-tab",children:(0,c.jsx)("p",{children:"video"})}),(0,c.jsx)("div",{className:"tab-pane fade",id:"Upload",role:"tabpanel","aria-labelledby":"Upload-tab",children:(0,c.jsx)(N,{})}),(0,c.jsx)("div",{className:"tab-pane fade",id:"playlist",role:"tabpanel","aria-labelledby":"playlist-tab",children:(0,c.jsx)("p",{children:"playlist"})}),(0,c.jsx)("div",{className:"tab-pane fade show active",id:"Reports",role:"tabpanel","aria-labelledby":"Reports-tab",children:(0,c.jsx)(k,{})}),(0,c.jsx)("div",{className:"tab-pane fade",id:"Settings",role:"tabpanel","aria-labelledby":"Settings-tab",children:(0,c.jsx)("p",{children:"Settings"})})]})]})})]})}}]);
//# sourceMappingURL=719.901572a5.chunk.js.map