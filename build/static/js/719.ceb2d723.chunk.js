"use strict";(self.webpackChunkswirl_dashboard=self.webpackChunkswirl_dashboard||[]).push([[719],{96719:(e,s,a)=>{a.r(s),a.d(s,{default:()=>k});var t=a(65043),l=a(41591),n=a(58786),o=a(13172),r=a(86347),d=a(60184),i=a(36505),c=a(70579);const h=e=>{let{show:s,handleClose:a,data:t}=e;return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(i.A,{show:s,className:"d-grid modal_video",size:"lg",onHide:a,children:(0,c.jsx)(i.A.Body,{children:(0,c.jsxs)("div",{className:"row m-0 p-0",children:[(0,c.jsx)("div",{className:"col-6",children:(0,c.jsxs)("video",{className:"modal_video",controls:!0,width:"600",height:"400",autoPlay:!0,loop:!0,children:[(0,c.jsx)("source",{src:t.url,type:"video/mp4"}),"Your browser does not support the video tag."]})}),(0,c.jsxs)("div",{className:"col-6 m-0 ",children:[(0,c.jsxs)("div",{className:"p-2 mt-1 m-0 d-flex",children:[(0,c.jsx)("img",{alt:"productmini",src:"https://cdn.shopify.com/s/files/1/0088/4031/4931/files/39_f63c01f8-48d6-41b8-8066-1026f6f98e60.jpg?v=1702991482",className:"rounded",style:{height:"60px",width:"60px"}}),(0,c.jsxs)("div",{className:"ps-2",children:[(0,c.jsxs)("h6",{className:"mb-0",children:[t.video_title," 1"]}),(0,c.jsx)("p",{className:"prouct_desc",children:"Here descc"})]})]}),(0,c.jsxs)("div",{className:"p-2 mt-1 m-0 d-flex border-top",children:[(0,c.jsx)("img",{alt:"productmini",src:"https://cdn.shopify.com/s/files/1/0088/4031/4931/files/39_f63c01f8-48d6-41b8-8066-1026f6f98e60.jpg?v=1702991482",className:"rounded",style:{height:"60px",width:"60px"}}),(0,c.jsxs)("div",{className:"ps-2",children:[(0,c.jsxs)("h6",{className:"mb-0",children:[t.video_title," 2"]}),(0,c.jsx)("p",{className:"prouct_desc",children:"Here descc"})]})]}),(0,c.jsxs)("div",{className:"p-2 mt-1 m-0 d-flex border-top",children:[(0,c.jsx)("img",{alt:"productmini",src:"https://cdn.shopify.com/s/files/1/0088/4031/4931/files/39_f63c01f8-48d6-41b8-8066-1026f6f98e60.jpg?v=1702991482",className:"rounded",style:{height:"60px",width:"60px"}}),(0,c.jsxs)("div",{className:"ps-2",children:[(0,c.jsxs)("h6",{className:"mb-0",children:[t.video_title," 3"]}),(0,c.jsx)("p",{className:"prouct_desc",children:"Here descc"})]})]})]})]})})})})};var m=a(11238),p=a(72450),x=a(37762),b=(a(20557),a(77154)),g=a(83003),u=a(31121),j=a(31462),v=a(49804),y=a(55508);const w=e=>{let{show:s,handleClose:a,data:l}=e;const[o,r]=(0,t.useState)([]),[d,h]=t.useState(!1),x=[{name:"Video Title",selector:e=>l.video_title},{name:"Name",selector:e=>e.name},{name:"Date",selector:e=>l.date},{name:"Mobile",selector:e=>e.mobile},{name:"Message",selector:e=>e.message}];(0,t.useEffect)((()=>{s&&async function(){h(!0);try{let e=new FormData;e.append("brand_id",l.brand_id),e.append("start_date",(0,u.GP)(l.startDate,"yyyy-MM-dd")),e.append("end_date",(0,u.GP)(l.endDate,"yyyy-MM-dd")),e.append("video_id",l.video_id),await b.A.post("https://bigleap.live/index.php/APIv1/ShortVideoAnalytics/getAskquestion",e).then((e=>{r(e.data.data),h(!1)})).catch((e=>{console.log(e),h(!1)}))}catch(e){throw h(!1),e}}(l.date)}),[l.date]);return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)(i.A,{show:s,className:"d-grid w-100 askquestion_modal ",size:"lg",onHide:a,children:[(0,c.jsxs)(i.A.Title,{className:"p-3 pb-0",children:["Asked Questions ",(0,c.jsx)(j.Blb,{style:{cursor:"pointer"},title:"These are raised questions asked by viewers on video or product"}),(0,c.jsxs)("button",{className:"btn btn-sm btn-outline-dark float-end",onClick:()=>(()=>{const e=m.Wp.json_to_sheet(o),s=m.Wp.book_new();m.Wp.book_append_sheet(s,e,"Sheet1");const a=m.M9(s,{bookType:"xlsx",type:"array"});(0,p.saveAs)(new Blob([a],{type:"application/octet-stream"}),"askQuestData.xlsx")})(),children:[(0,c.jsx)("span",{className:"mt-3",children:"Export"})," ",(0,c.jsx)(v.w4m,{size:25})]}),(0,c.jsx)("hr",{})]}),(0,c.jsx)(i.A.Body,{className:"p-3 pt-0",children:(0,c.jsx)(n.Ay,{columns:x,data:o,progressPending:d,progressComponent:(0,c.jsx)("div",{className:"p-3 m-4",children:(0,c.jsx)(y.IN,{height:30,width:30,strokeColor:"grey"})})})})]})})};var N=a(3825);const f=()=>{const e=new Date,s=new Date(e),[a,l]=(0,t.useState)(!1),[i,j]=(0,t.useState)([]),[f,_]=(0,t.useState)(!1),[k,C]=(0,t.useState)([]),[D,S]=(0,t.useState)([]),[A,M]=(0,t.useState)(""),[F,T]=(0,t.useState)(!1),[H,V]=t.useState(!1),E=(0,g.d4)((e=>e.auth.user)),[I,R]=(0,t.useState)([]);s.setDate(e.getDate()-1);const[W,B]=(0,t.useState)([{startDate:new Date(e.getTime()-6048e5),endDate:s,key:"selection"}]),[P,O]=(0,t.useState)(!1);const Q=[{selector:e=>e.index+1,sortable:!0,width:"4%"},{name:"Video Title",selector:e=>e.video_title,sortable:!0,width:"22.2%",cell:e=>(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("p",{className:"pt-4",title:e.video_title,style:{padding:"2px",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",cursor:"pointer"},onClick:()=>{j(e),l(!0)},children:[e.video_title?e.video_title:"no title"," "]}),(0,c.jsxs)("span",{onClick:()=>{j(e),l(!0)},style:{cursor:"pointer"},children:["  ",(0,c.jsx)(N.o0O,{size:20,className:"ms-1"})]})]})},{name:"Total Views",selector:e=>e.total_views,sortable:!0,style:{backgroundColor:"rgba(255, 0, 0,.1)"}},{name:"Unique  Views",selector:e=>e.total_unique_views,sortable:!0,style:{backgroundColor:"rgba(255, 0, 0,.1)"}},{name:"Watch Time ",selector:e=>e.total_watchtime,sortable:!0,style:{backgroundColor:"rgba(255, 0, 0,.1)"}},{name:"Avg. Watch Time",selector:e=>Math.round(e.average_watchtime),sortable:!0,style:{backgroundColor:"rgba(255, 0, 0,.1)"}},{name:"Engage. Rate %",selector:e=>null===e.engagement_rate?"".concat("0%"):"".concat(Math.round(e.engagement_rate),"%"),sortable:!0,style:{backgroundColor:"rgba(0, 255, 71, .1)"}},{name:"CTR%",selector:e=>"".concat(Math.round(e.ctr),"%"),sortable:!0,style:{backgroundColor:"rgba(0, 255, 71, .1)"}},{name:"Add To Cart",selector:e=>e.addtoCart,sortable:!0,style:{backgroundColor:"rgba(0, 255, 71, .1)"}},{name:"Buy Now",selector:e=>e.buyNow,sortable:!0,style:{backgroundColor:"rgba(0, 255, 71, .1)"}},{name:"Ask Question",selector:e=>e.askQuestion,sortable:!0,style:{backgroundColor:"rgba(0, 255, 71, .1)"},cell:e=>e.askQuestion>0?(0,c.jsx)("p",{onClick:()=>{_(!0),C(e)},style:{cursor:"pointer"},children:(0,c.jsx)("span",{className:"badge_ask_count",children:e.askQuestion})}):(0,c.jsx)("p",{style:{padding:"3px 5px"},children:e.askQuestion})}],Y=()=>(0,c.jsx)(c.Fragment,{children:(0,c.jsx)("div",{className:"ms-3",children:(0,c.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,c.jsx)("path",{d:"M13.3333 2.6665V10.6665H15.3333L12.6667 13.9998L10 10.6665H12V2.6665H13.3333ZM8 11.9998V13.3332H2V11.9998H8ZM9.33333 7.33317V8.6665H2V7.33317H9.33333ZM9.33333 2.6665V3.99984H2V2.6665H9.33333Z",fill:"#09121F"})})})}),L=(0,t.useCallback)((async()=>{V(!0);try{await b.A.get("https://goswirl.world:3001/getAnalyticsDataByBrandIdAndDate?brand_id=".concat(E.brand_id,"&start_date=").concat((0,u.GP)(W[0].startDate,"yyyy-MM-dd"),"&end_date=").concat((0,u.GP)(W[0].endDate,"yyyy-MM-dd"))).then((e=>{R(e.data.resp),e.data&&V(!1)})).catch((e=>{console.log(e),V(!1)}))}catch(e){console.log(e)}}),[E.brand_id,W]);return(0,t.useEffect)((()=>{T(""!==A)}),[A]),(0,t.useEffect)((()=>{L(),(()=>{let e=0,s=0;I&&I.map((a=>{e+=parseInt(a.total_views),s+=parseInt(a.total_watchtime)}))})()}),[W,L]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"d-flex",children:(0,c.jsx)("div",{className:"ms-auto d-flex align-items-center mb-3",children:(0,c.jsxs)("div",{className:"dropdown d-flex",children:[(0,c.jsxs)("div",{className:"input-group input-group me-1",children:[(0,c.jsx)("span",{className:"input-group-text border-end-0 border-dark",children:(0,c.jsx)(d.KSO,{})}),(0,c.jsx)("input",{type:"search",className:"form-control border-start-0 border-dark",name:"search",value:A,placeholder:"Search video...",onChange:e=>(e=>{M(e);const s=I.filter((e=>e.video_title&&e.video_title.toLowerCase().includes(A.toLowerCase())));S(s),console.log(I)})(e.target.value)})]}),(0,c.jsxs)(o.A,{show:P,onToggle:()=>O(!P),children:[window.innerWidth>556?(0,c.jsx)(o.A.Toggle,{id:"dropdown-basic",className:"bg-transparent text-dark border-dark",children:(0,c.jsx)("span",{children:null!==W[0].endDate?"".concat(W[0].startDate.toString().slice(4,15)," to ").concat(W[0].endDate.toString().slice(4,15)):"Filter by date"})}):(0,c.jsx)(o.A.Toggle,{id:"dropdown-basic",className:"bg-transparent text-dark border-dark",children:(0,c.jsx)("span",{children:null!==W[0].endDate?"".concat(W[0].startDate.getFullYear().toString().slice(2,4),"/").concat(W[0].startDate.getFullYear().toString().slice(2,4),"/").concat(W[0].startDate.getFullYear().toString().slice(2,4)," - ").concat(W[0].startDate.getFullYear().toString().slice(2,4),"/").concat(W[0].startDate.getFullYear().toString().slice(2,4),"/").concat(W[0].startDate.getFullYear().toString().slice(2,4)):"Filter by date"})}),(0,c.jsxs)(o.A.Menu,{children:[(0,c.jsx)(r.Ur,{editableDateInputs:!1,onChange:e=>B([e.selection]),moveRangeOnFirstSelection:!0,ranges:W,months:2,direction:"horizontal",maxDate:s,minDate:"236633565"==(null===E||void 0===E?void 0:E.brand_id)?new Date(2024,2,15):new Date(2024,3,5)}),(0,c.jsxs)("div",{className:"w-100",children:[(0,c.jsx)("button",{id:"dropdown-basic",className:"btn btn-sm btn-primary float-end me-3",onClick:()=>{O(!1)},children:"Done"}),(0,c.jsx)("button",{id:"dropdown-basic",className:"btn btn-sm btn-outline-primary float-end me-3",onClick:()=>{B([{startDate:new Date(e.getTime()-6048e5),endDate:s,key:"selection"}])},children:"Reset"})]})]})]}),(0,c.jsxs)(o.A,{className:"ms-1",children:[window.innerWidth>556?(0,c.jsx)(o.A.Toggle,{className:"bg-transparent text-dark border-dark",children:"Export"}):(0,c.jsx)(o.A.Toggle,{className:"bg-transparent text-dark border-dark",children:(0,c.jsx)(v.w4m,{})}),(0,c.jsxs)(o.A.Menu,{children:[(0,c.jsxs)(o.A.Item,{onClick:()=>{const e=I.map((e=>Object.values(e).join(","))).join("\n");(0,p.saveAs)(new Blob([e],{type:"text/csv;charset=utf-8"}),"data.csv")},children:[(0,c.jsx)(d.QaY,{color:"gray"})," Export as CSV "]}),(0,c.jsxs)(o.A.Item,{onClick:()=>{const e=m.Wp.json_to_sheet(I),s=m.Wp.book_new();m.Wp.book_append_sheet(s,e,"Sheet1");const a=m.M9(s,{bookType:"xlsx",type:"array"});(0,p.saveAs)(new Blob([a],{type:"application/octet-stream"}),"data.xlsx")},children:[(0,c.jsx)(d.Ru,{color:"green"})," Export as XLS"]}),(0,c.jsxs)(o.A.Item,{onClick:()=>{const e=new x.default;e.autoTable({head:[Object.keys(I[0])],body:I.map((e=>Object.values(e))),headStyles:{fillColor:[238,238,119],textColor:[0,0,0]}}),e.save("data.pdf")},children:[(0,c.jsx)(d.kl1,{color:"red"})," Export as PDF"]})]})]})]})})}),(0,c.jsx)("div",{style:{width:"100%",overflow:"auto",height:"auto"},children:(0,c.jsx)("div",{style:{border:"1px solid #E0E0E0",minWidth:"1500px"},children:(0,c.jsx)(n.Ay,{columns:Q,data:F?null===D||void 0===D?void 0:D.map(((e,s)=>({...e,index:s}))):null===I||void 0===I?void 0:I.map(((e,s)=>({...e,index:s}))),subHeader:!0,progressPending:H,pagination:!0,progressComponent:(0,c.jsx)("div",{className:"p-3 m-4",children:(0,c.jsx)(y.IN,{height:30,width:30,strokeColor:"grey"})}),sortIcon:(0,c.jsx)(Y,{}),highlightOnHover:!0,className:"custom-datatable",subHeaderComponent:(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("div",{className:"d-flex w-100 table_header_row",children:[(0,c.jsx)("div",{className:"table_blank_column"}),(0,c.jsx)("div",{className:"table_higher_column",children:(0,c.jsxs)("div",{className:"d-flex text-center",children:[(0,c.jsx)("div",{className:"perfomance_column",children:"Performance"}),(0,c.jsx)("div",{className:"engagement_column",children:"Engagement"})]})})]})})})})}),(0,c.jsx)(h,{show:a,handleClose:()=>l(!1),data:i}),(0,c.jsx)(w,{show:f,handleClose:()=>_(!1),data:{...k,...W[0]}})]})},_=()=>(0,c.jsx)("div",{children:(0,c.jsxs)("div",{className:"row",children:[(0,c.jsx)("div",{className:"col-9",children:"2"}),(0,c.jsx)("div",{className:"col-3",children:"3"})]})}),k=()=>(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(l.m,{children:(0,c.jsx)("title",{children:"SWIRL | Short Videos"})}),(0,c.jsx)("div",{children:(0,c.jsxs)("div",{className:"col",children:[(0,c.jsxs)("div",{className:"d-flex",children:[(0,c.jsx)("ul",{className:"nav nav-tabs",id:"responsive-tabs",role:"tablist",children:(0,c.jsx)("li",{className:"nav-item",role:"presentation",children:(0,c.jsx)("button",{className:"nav-link active",id:"Reports-tab","data-bs-toggle":"tab","data-bs-target":"#Reports",type:"button",role:"tab","aria-controls":"Reports","aria-selected":"false",children:"Reports"})})}),(0,c.jsx)("div",{className:"ms-auto d-flex align-items-center"})]}),(0,c.jsxs)("div",{className:"tab-content p-3",id:"responsive-tabs-content",children:[(0,c.jsx)("div",{className:"tab-pane fade ",id:"video",role:"tabpanel","aria-labelledby":"video-tab",children:(0,c.jsx)("p",{children:"video"})}),(0,c.jsx)("div",{className:"tab-pane fade",id:"Upload",role:"tabpanel","aria-labelledby":"Upload-tab",children:(0,c.jsx)(_,{})}),(0,c.jsx)("div",{className:"tab-pane fade",id:"playlist",role:"tabpanel","aria-labelledby":"playlist-tab",children:(0,c.jsx)("p",{children:"playlist"})}),(0,c.jsx)("div",{className:"tab-pane fade show active",id:"Reports",role:"tabpanel","aria-labelledby":"Reports-tab",children:(0,c.jsx)(f,{})}),(0,c.jsx)("div",{className:"tab-pane fade",id:"Settings",role:"tabpanel","aria-labelledby":"Settings-tab",children:(0,c.jsx)("p",{children:"Settings"})})]})]})})]})}}]);
//# sourceMappingURL=719.ceb2d723.chunk.js.map