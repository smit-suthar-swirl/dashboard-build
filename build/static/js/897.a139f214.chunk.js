"use strict";(self.webpackChunkswirl_dashboard=self.webpackChunkswirl_dashboard||[]).push([[897],{63556:(e,t,s)=>{s.r(t),s.d(t,{default:()=>F});var a=s(65043),o=s(41591),n=s(58786),i=s(21467),l=s(86347),r=s(60184),c=s(17451),d=s(90303),m=s(19550),h=s(77154),u=s(83003),p=s(47196),x=s(45394),g=s(66833),v=s(86178),b=s.n(v),j=s(91036),w=s(70579);const _=e=>{var t;let{el:s,updatePinStatus:o,removeComment:n}=e;const[i,l]=(0,a.useState)(!1),r=Number(s.createdAt),c=b()(r).fromNow();return(0,w.jsxs)("div",{className:"d-flex ps-2 pe-2 pt-2 hover-target-".concat(s.id),onMouseEnter:()=>{l(!0)},onMouseMove:()=>{l(!0)},onMouseOver:()=>{l(!0)},onMouseLeave:()=>{l(!1)},children:[s.brand_logo?(0,w.jsx)("img",{style:{height:"30px",width:"30px",borderRadius:"50%"},src:s.brand_logo}):(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)("svg",{width:"37",height:"37",viewBox:"0 0 30 31",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,w.jsx)("g",{filter:"url(#filter0_b_284_9460)",children:(0,w.jsx)("circle",{cx:"15",cy:"15.6431",r:"15",fill:"#E8E8E8"})}),(0,w.jsx)("g",{"clip-path":"url(#clip0_284_9460)",children:(0,w.jsx)("path",{d:"M9.66699 22.3096C9.66699 20.8951 10.2289 19.5385 11.2291 18.5383C12.2293 17.5381 13.5858 16.9762 15.0003 16.9762C16.4148 16.9762 17.7714 17.5381 18.7716 18.5383C19.7718 19.5385 20.3337 20.8951 20.3337 22.3096H19.0003C19.0003 21.2487 18.5789 20.2313 17.8288 19.4811C17.0786 18.731 16.0612 18.3096 15.0003 18.3096C13.9395 18.3096 12.922 18.731 12.1719 19.4811C11.4218 20.2313 11.0003 21.2487 11.0003 22.3096H9.66699ZM15.0003 16.3096C12.7903 16.3096 11.0003 14.5196 11.0003 12.3096C11.0003 10.0996 12.7903 8.30957 15.0003 8.30957C17.2103 8.30957 19.0003 10.0996 19.0003 12.3096C19.0003 14.5196 17.2103 16.3096 15.0003 16.3096ZM15.0003 14.9762C16.4737 14.9762 17.667 13.7829 17.667 12.3096C17.667 10.8362 16.4737 9.6429 15.0003 9.6429C13.527 9.6429 12.3337 10.8362 12.3337 12.3096C12.3337 13.7829 13.527 14.9762 15.0003 14.9762Z",fill:"#747477"})}),(0,w.jsxs)("defs",{children:[(0,w.jsxs)("filter",{id:"filter0_b_284_9460",x:"-10",y:"-9.35693",width:"50",height:"50",filterUnits:"userSpaceOnUse","color-interpolation-filters":"sRGB",children:[(0,w.jsx)("feFlood",{"flood-opacity":"0",result:"BackgroundImageFix"}),(0,w.jsx)("feGaussianBlur",{in:"BackgroundImageFix",stdDeviation:"5"}),(0,w.jsx)("feComposite",{in2:"SourceAlpha",operator:"in",result:"effect1_backgroundBlur_284_9460"}),(0,w.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_backgroundBlur_284_9460",result:"shape"})]}),(0,w.jsx)("clipPath",{id:"clip0_284_9460",children:(0,w.jsx)("rect",{width:"16",height:"16",fill:"white",transform:"translate(7 7.64307)"})})]})]})}),(0,w.jsxs)("div",{className:"d-flex ms-2 w-100 justify-content-between",children:[(0,w.jsxs)("div",{children:[(0,w.jsxs)("b",{children:[s.uName,(0,w.jsx)(g.dnm,{size:10,color:"#D9D9D9"}),(0,w.jsx)("small",{className:"ps-1",style:{color:"rgba(0,0,0,0.5)"},children:c})]}),(0,w.jsxs)("p",{style:{fontWeight:"lighter",color:"#515151",textWrap:"wrap",wordBreak:"break-all"},children:[null!==s&&void 0!==s&&null!==(t=s.comment)&&void 0!==t&&t.includes("http")?(0,w.jsx)("a",{href:s.comment,target:"_blank",children:s.comment}):(d=s.comment,d.replace(/&#(\d+);/g,((e,t)=>String.fromCodePoint(t))))," "]})]}),(0,w.jsxs)("div",{className:"d-flex hidden-div-".concat(s.id," gap-1"),style:{visibility:i?"visible":"hidden",cursor:"pointer"},children:[1==s.isPinned?(0,w.jsx)(p.Sf7,{onClick:()=>o(s),size:21}):(0,w.jsx)(p.xKd,{onClick:()=>o(s),size:21}),(0,w.jsx)(x.dW_,{size:18,onClick:()=>n(s),color:"red"})]})]})]});var d},f=e=>{var t;let{el:s,updatePinStatus:o,removeComment:n}=e;const[i,l]=(0,a.useState)(!1),r=Number(s.createdAt),c=b()(r).fromNow();return(0,w.jsxs)("div",{className:"d-flex ps-2 pe-2 pt-2 hover-target-".concat(s.id),style:{backgroundColor:"#F3F4F8"},onMouseEnter:()=>{l(!0)},onMouseMove:()=>{l(!0)},onMouseLeave:()=>{l(!1)},children:[s.brand_logo?(0,w.jsx)("img",{style:{height:"30px",width:"30px",borderRadius:"50%"},src:s.brand_logo}):(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)("svg",{width:"37",height:"37",viewBox:"0 0 30 31",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,w.jsx)("g",{filter:"url(#filter0_b_284_9460)",children:(0,w.jsx)("circle",{cx:"15",cy:"15.6431",r:"15",fill:"#E8E8E8"})}),(0,w.jsx)("g",{"clip-path":"url(#clip0_284_9460)",children:(0,w.jsx)("path",{d:"M9.66699 22.3096C9.66699 20.8951 10.2289 19.5385 11.2291 18.5383C12.2293 17.5381 13.5858 16.9762 15.0003 16.9762C16.4148 16.9762 17.7714 17.5381 18.7716 18.5383C19.7718 19.5385 20.3337 20.8951 20.3337 22.3096H19.0003C19.0003 21.2487 18.5789 20.2313 17.8288 19.4811C17.0786 18.731 16.0612 18.3096 15.0003 18.3096C13.9395 18.3096 12.922 18.731 12.1719 19.4811C11.4218 20.2313 11.0003 21.2487 11.0003 22.3096H9.66699ZM15.0003 16.3096C12.7903 16.3096 11.0003 14.5196 11.0003 12.3096C11.0003 10.0996 12.7903 8.30957 15.0003 8.30957C17.2103 8.30957 19.0003 10.0996 19.0003 12.3096C19.0003 14.5196 17.2103 16.3096 15.0003 16.3096ZM15.0003 14.9762C16.4737 14.9762 17.667 13.7829 17.667 12.3096C17.667 10.8362 16.4737 9.6429 15.0003 9.6429C13.527 9.6429 12.3337 10.8362 12.3337 12.3096C12.3337 13.7829 13.527 14.9762 15.0003 14.9762Z",fill:"#747477"})}),(0,w.jsxs)("defs",{children:[(0,w.jsxs)("filter",{id:"filter0_b_284_9460",x:"-10",y:"-9.35693",width:"50",height:"50",filterUnits:"userSpaceOnUse","color-interpolation-filters":"sRGB",children:[(0,w.jsx)("feFlood",{"flood-opacity":"0",result:"BackgroundImageFix"}),(0,w.jsx)("feGaussianBlur",{in:"BackgroundImageFix",stdDeviation:"5"}),(0,w.jsx)("feComposite",{in2:"SourceAlpha",operator:"in",result:"effect1_backgroundBlur_284_9460"}),(0,w.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_backgroundBlur_284_9460",result:"shape"})]}),(0,w.jsx)("clipPath",{id:"clip0_284_9460",children:(0,w.jsx)("rect",{width:"16",height:"16",fill:"white",transform:"translate(7 7.64307)"})})]})]})}),(0,w.jsxs)("div",{className:"d-flex ms-2 w-100 justify-content-between",children:[(0,w.jsxs)("div",{children:[(0,w.jsxs)("b",{children:[s.uName,(0,w.jsx)(g.dnm,{size:10,color:"#D9D9D9"}),(0,w.jsx)("small",{className:"ps-1",style:{color:"rgba(0,0,0,0.5)"},children:c})]}),(0,w.jsxs)("p",{style:{fontWeight:"lighter",color:"#515151",textWrap:"wrap",wordBreak:"break-all"},children:[null!==s&&void 0!==s&&null!==(t=s.comment)&&void 0!==t&&t.includes("http")?(0,w.jsx)("a",{href:s.comment,target:"_blank",children:s.comment}):(d=s.comment,d.replace(/&#(\d+);/g,((e,t)=>String.fromCodePoint(t))))," "]})]}),(0,w.jsxs)("div",{className:"d-flex hidden-div-".concat(s.id," gap-1"),style:{visibility:i?"visible":"hidden",cursor:"pointer"},children:[1==s.isPinned?(0,w.jsx)(p.Sf7,{onClick:()=>o(s),size:21}):(0,w.jsx)(p.xKd,{onClick:()=>o(s),size:21}),(0,w.jsx)(x.dW_,{size:18,onClick:()=>n(s),color:"red"})]})]})]});var d},y=e=>{let{show:t,handleClose:s,data:o}=e;const[n,i]=(0,a.useState)("products"),[l,r]=(0,a.useState)(!1),[p,x]=(0,a.useState)([]),g=(0,u.d4)((e=>e.auth.user)),[v,b]=(0,a.useState)([]),[y,C]=(0,a.useState)(""),[N,k]=(0,a.useState)([]),[S,A]=(0,a.useState)(!1),D=(0,a.useRef)(),T=(0,a.useRef)(null),M=o.video_id,P=async e=>{try{const t=(0,m.H9)(d.db,"ssv13_comments/v".concat(M,"/comments/").concat(e.id));await(0,m.mZ)(t,e),B()}catch(t){throw console.error("Error updating video comment document: ",t),t}},E=()=>{var e;null===(e=D.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},B=()=>{const e=(0,m.rJ)(d.db,"ssv13_comments","v".concat(o.video_id),"comments"),t=(0,m.P)(e,(0,m.My)("createdAt","asc"));(0,m.aQ)(t,(e=>{const t=e.docs.map((e=>({id:e.id,...e.data()}))),s=t.filter((e=>1===e.isPinned));b(t),k(s)}),(e=>{console.error("Error fetching data: ",e)}))},F=async e=>{e.preventDefault();try{let t={uName:g.first_name,comment:y,createdAt:(new Date).getTime(),isPinned:0,isRemoved:0,brand_logo:null===g||void 0===g?void 0:g.user_profile};await(async(e,t)=>{try{const s=(0,m.H9)(d.db,"ssv13_comments/v".concat(e));await(0,m.BN)(s,{});const a=await(0,m.gS)((0,m.rJ)(d.db,"ssv13_comments/v".concat(e,"/comments")),t);return E(),B(),a.id}catch(s){throw console.error("Error adding video comment document: ",s),s}})(o.video_id,t),B(),e.target.reset()}catch(t){console.log(t)}},L=async e=>{const t=(0,m.H9)(d.db,"ssv13_comments","v".concat(o.video_id),"comments",e.id);0===e.isPinned?N.length<4?await(0,m.mZ)(t,{isPinned:0===e.isPinned?1:0}):j.oR.warn("4 pinned comment section added fullfiled"):await(0,m.mZ)(t,{isPinned:0}),B()},I=async e=>{try{const t=(0,m.H9)(d.db,"ssv13_comments","v".concat(o.video_id),"comments",e.id);await(0,m.kd)(t),B()}catch(t){console.error("Error deleting comment: ",t)}},R=()=>{T.current.scrollTop>=100?A(!0):A(!1)};(0,a.useEffect)((()=>{t&&(async()=>{r(!0);try{const e=await h.A.get("https://liveshopping.asia/getProductInfoByVideoId?brandId=".concat(g.brand_id,"&videoId=").concat(o.video_id));e.data?(x(e.data.productResp),r(!1),E()):(x([]),r(!1))}catch(e){console.log(e),x([]),r(!1)}})()}),[t]),(0,a.useEffect)((()=>{t&&setTimeout((()=>{A(!1),E()}),1e3)}),[M,t]),(0,a.useEffect)((()=>{t&&"comments"===n&&(async e=>{try{const t=(0,m.rJ)(d.db,"ssv13_comments","v".concat(e),"comments"),s=(0,m.P)(t,(0,m.My)("createdAt","asc")),a=await(0,m.GG)(s);console.log(a);const o=a.docs.map((e=>({id:e.id,...e.data()}))),n=o.filter((e=>1===e.isPinned));b(o),k(n),setTimeout((()=>{E()}),100)}catch(t){console.error("Error fetching data: ",t)}})(null===o||void 0===o?void 0:o.video_id)}),[t,o.video_id,n]);const V=(0,a.useRef)(),W=e=>{null===V||void 0===V||V.current.scrollIntoView()};return t?(0,w.jsx)(c.A,{show:!0,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,onHide:s,children:(0,w.jsx)("div",{className:"video-modal-ssv",children:(0,w.jsxs)("div",{className:"video-modal-ssv-row",children:[(0,w.jsx)("div",{className:"video-modal-ssv-col",children:(0,w.jsxs)("video",{className:"modal_video_col",controls:!0,width:"600",autoPlay:!0,loop:!0,muted:!0,children:[(0,w.jsx)("source",{src:o.url,type:"video/mp4"}),"Your browser does not support the video tag."]})}),(0,w.jsxs)("div",{className:"video-modal-ssv-col",children:[(0,w.jsxs)("ul",{className:"nav nav-tabs",id:"responsive-tabs",role:"tablist",children:[(0,w.jsx)("li",{className:"nav-item",role:"presentation",children:(0,w.jsx)("button",{className:"nav-link active",id:"product-tab","data-bs-toggle":"tab","data-bs-target":"#product",type:"button",role:"tab","aria-controls":"video","aria-selected":"true",onClick:()=>i("products"),children:"Products"})}),(0,w.jsx)("li",{className:"nav-item",role:"presentation",children:(0,w.jsx)("button",{className:"nav-link",id:"comments-tab","data-bs-toggle":"tab","data-bs-target":"#comments",type:"button",role:"tab","aria-controls":"Reports","aria-selected":"false",onClick:()=>i("comments"),children:"Comments"})})]}),(0,w.jsxs)("div",{className:"tab-content",id:"responsive-tabs-content",style:{height:"calc(100% - 42px)"},children:[(0,w.jsx)("div",{className:"tab-pane fade show active h-100",id:"product",role:"tabpanel","aria-labelledby":"product-tab",children:l?(0,w.jsx)("p",{className:"text-muted mt-5 text-center",children:"Loading..."}):p.map(((e,t)=>{const s=new Intl.NumberFormat(void 0,{style:"currency",currency:e.currencyName}).formatToParts(0).find((e=>"currency"===e.type)).value;return(0,w.jsxs)("div",{className:"p-2 mt-1 m-0 d-flex product_card",children:[(0,w.jsx)("img",{alt:"productmini",src:e.image,className:"rounded",style:{height:"60px",width:"60px",border:"1px solid #aaa"}}),(0,w.jsxs)("div",{className:"ps-2 w-100",children:[(0,w.jsx)("h6",{className:"mb-0 product_title_video_model",title:e.title,children:e.title}),(0,w.jsxs)("p",{className:"prouct_desc",children:[s,parseInt(e.discountPrice).toLocaleString()," ",e.discountPrice!==e.price&&(0,w.jsx)("span",{className:"text-muted",children:(0,w.jsxs)("del",{children:[s,parseInt(e.price).toLocaleString()]})})," "]})]})]},t)}))}),(0,w.jsx)("div",{className:"tab-pane fade h-100",id:"comments",role:"tabpanel","aria-labelledby":"comments-tab",children:(0,w.jsxs)("div",{className:"comment-section-main-div-ssv",children:[(0,w.jsxs)("div",{className:"section_comment_scroll",ref:T,onScroll:R,children:[(0,w.jsx)("div",{ref:V}),(0,w.jsxs)("div",{className:"pinned_section_closed",style:{display:S&&N.length>0?"":"none"},onClick:W,children:[(0,w.jsxs)("p",{children:["Pinned comment",(0,w.jsx)("label",{className:"JS-pinned-comment-counter-ssv13",children:N.length})]}),(0,w.jsx)("p",{style:{marginLeft:"auto"},children:(0,w.jsx)("svg",{width:"13",height:"13",viewBox:"0 0 13 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,w.jsx)("path",{d:"M12.8764 5.78136L11.9331 6.72402L11.4618 6.25269L8.63377 9.08069L8.16244 11.438L7.2191 12.3807L4.3911 9.55202L1.0911 12.852L0.148438 11.9094L3.44844 8.60936L0.619771 5.78136L1.56244 4.83802L3.92044 4.36669L6.74844 1.53869L6.2771 1.06736L7.21977 0.124023L12.8764 5.78136Z",fill:"#334499"})})})]}),N.length>0&&(0,w.jsx)("div",{className:"pin display-flex flex-column",children:(0,w.jsx)("div",{id:"pinnedcommentsection",children:N.map((e=>(0,w.jsx)(f,{el:e,updatePinStatus:L,removeComment:I},e.id)))})}),v.length>0?(0,w.jsx)("div",{className:"display-flex flex-column",id:"unpinnedcommentsection",style:{overflow:"auto"},children:v.map((e=>(0,w.jsx)(_,{editVideoComment:P,el:e,updatePinStatus:L,removeComment:I},e.id)))}):(0,w.jsx)("p",{className:"text-muted text-center mt-5",children:"No comments"}),(0,w.jsx)("div",{ref:D})]}),(0,w.jsx)("div",{className:"form-comment p-1 border-top",children:(0,w.jsxs)("form",{className:"d-flex",onSubmit:F,children:[(0,w.jsx)("input",{className:"form-control mt-auto",max:250,maxLength:250,onChange:e=>C(e.target.value),placeholder:"Type something here..",type:"text"}),(0,w.jsx)("button",{type:"submit",className:"btn btn-sm btn-dark ms-2",disabled:0===y.length,children:"Send"})]})})]})})]})]})]})})}):null};var C=s(11238),N=s(72450),k=s(37762),S=(s(20557),s(31121)),A=s(31462),D=s(49804),T=s(55508);const M=e=>{let{show:t,handleClose:s,data:o}=e;const[i,l]=(0,a.useState)([]),[r,d]=a.useState(!1),m=[{name:"Video Title",selector:e=>o.video_title},{name:"Name",selector:e=>e.name},{name:"Date",selector:e=>o.date},{name:"Mobile",selector:e=>e.mobile},{name:"Message",selector:e=>e.message}];(0,a.useEffect)((()=>{t&&async function(){d(!0);try{let e=new FormData;e.append("brand_id",o.brand_id),e.append("start_date",(0,S.GP)(o.startDate,"yyyy-MM-dd")),e.append("end_date",(0,S.GP)(o.endDate,"yyyy-MM-dd")),e.append("video_id",o.video_id),await h.A.post("https://bigleap.live/index.php/APIv1/ShortVideoAnalytics/getAskquestion",e).then((e=>{l(e.data.data),d(!1)})).catch((e=>{console.log(e),d(!1)}))}catch(e){throw d(!1),e}}(o.date)}),[o.date]);return(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)(c.A,{show:t,className:"d-grid w-100 askquestion_modal ",size:"lg",onHide:s,children:[(0,w.jsxs)(c.A.Title,{className:"p-3 pb-0",children:["Asked Questions ",(0,w.jsx)(A.Blb,{style:{cursor:"pointer"},title:"These are raised questions asked by viewers on video or product"}),(0,w.jsxs)("button",{className:"btn btn-sm btn-outline-dark float-end",onClick:()=>(()=>{const e=C.Wp.json_to_sheet(i),t=C.Wp.book_new();C.Wp.book_append_sheet(t,e,"Sheet1");const s=C.M9(t,{bookType:"xlsx",type:"array"});(0,N.saveAs)(new Blob([s],{type:"application/octet-stream"}),"askQuestData.xlsx")})(),children:[(0,w.jsx)("span",{className:"mt-3",children:"Export"})," ",(0,w.jsx)(D.w4m,{size:25})]}),(0,w.jsx)("hr",{})]}),(0,w.jsx)(c.A.Body,{className:"p-3 pt-0",children:(0,w.jsx)(n.Ay,{columns:m,data:i,progressPending:r,progressComponent:(0,w.jsx)("div",{className:"p-3 m-4",children:(0,w.jsx)(T.IN,{height:30,width:30,strokeColor:"grey"})})})})]})})};var P=s(3825);const E=e=>{let{state:t,setState:s}=e;const o=new Date,c=new Date(o),[d,m]=(0,a.useState)(!1),[p,x]=(0,a.useState)([]),[g,v]=(0,a.useState)(!1),[b,j]=(0,a.useState)([]),[_,f]=(0,a.useState)([]),[A,E]=(0,a.useState)(""),[B,F]=(0,a.useState)(!1),[L,I]=a.useState(!1),R=(0,u.d4)((e=>e.auth.user)),[V,W]=(0,a.useState)([]);c.setDate(o.getDate()-1);const[H,z]=(0,a.useState)([{startDate:new Date(o.getTime()-6048e5),endDate:c,key:"selection"}]),[Q,Z]=(0,a.useState)(!1);const q=[{selector:e=>e.index+1,sortable:!0,width:"4%"},{name:"Video Title",selector:e=>e.video_title,sortable:!0,width:"22.2%",cell:e=>(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("p",{className:"pt-4",title:e.video_title,style:{padding:"2px",overflow:"hidden",whiteSpace:"nowrap",maxWidth:"280px",textOverflow:"ellipsis",cursor:"pointer"},onClick:()=>{x(e),m(!0)},children:[e.video_title?e.video_title:"no title"," "]}),(0,w.jsxs)("span",{onClick:()=>{x(e),m(!0)},style:{cursor:"pointer"},children:["  ",(0,w.jsx)(P.o0O,{size:20,className:"ms-1"})]})]})},{name:"Total Views",selector:e=>e.total_views,sortable:!0,style:{backgroundColor:"rgba(255, 0, 0,.1)"}},{name:"Unique  Views",selector:e=>e.total_unique_views,sortable:!0,style:{backgroundColor:"rgba(255, 0, 0,.1)"}},{name:"Watch Time [Mins]",selector:e=>e.total_watchtime,sortable:!0,style:{backgroundColor:"rgba(255, 0, 0,.1)"},cell:e=>(parseInt(e.total_watchtime)/60).toFixed(2)},{name:"Avg. Watch Time [Secs]",selector:e=>Math.round(e.average_watchtime),sortable:!0,style:{backgroundColor:"rgba(255, 0, 0,.1)"}},{name:"Add To Cart",selector:e=>e.addtoCart,sortable:!0,style:{backgroundColor:"rgba(0, 255, 71, .1)"}},{name:"Buy Now",selector:e=>e.buyNow,sortable:!0,style:{backgroundColor:"rgba(0, 255, 71, .1)"}},{name:"Ask Question",selector:e=>e.askQuestion,sortable:!0,style:{backgroundColor:"rgba(0, 255, 71, .1)"},cell:e=>e.askQuestion>0?(0,w.jsx)("p",{onClick:()=>{v(!0),j(e)},style:{cursor:"pointer"},children:(0,w.jsx)("span",{className:"badge_ask_count",children:e.askQuestion})}):(0,w.jsx)("p",{style:{padding:"3px 5px"},children:e.askQuestion})},{name:"Engage. Rate %",selector:e=>null===e.engagement_rate?"".concat("0%"):"".concat(Math.round(e.engagement_rate),"%"),sortable:!0,style:{backgroundColor:"rgba(0, 255, 71, .1)"}},{name:"CTR%",selector:e=>"".concat(Math.round(e.ctr_rate),"%"),sortable:!0,style:{backgroundColor:"rgba(0, 255, 71, .1)"}}],G=()=>(0,w.jsx)(w.Fragment,{children:(0,w.jsx)("div",{className:"ms-3",children:(0,w.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,w.jsx)("path",{d:"M13.3333 2.6665V10.6665H15.3333L12.6667 13.9998L10 10.6665H12V2.6665H13.3333ZM8 11.9998V13.3332H2V11.9998H8ZM9.33333 7.33317V8.6665H2V7.33317H9.33333ZM9.33333 2.6665V3.99984H2V2.6665H9.33333Z",fill:"#09121F"})})})}),O=(0,a.useCallback)((async()=>{I(!0);try{await h.A.get("https://goswirl.world:3001/getAnalyticsDataByBrandIdAndDate?brand_id=".concat(null===R||void 0===R?void 0:R.brand_id,"&start_date=").concat((0,S.GP)(t[0].startDate,"yyyy-MM-dd"),"&end_date=").concat((0,S.GP)(t[0].endDate,"yyyy-MM-dd"))).then((e=>{W(e.data.resp),e.data&&I(!1)})).catch((e=>{console.log(e),I(!1)}))}catch(e){console.log(e)}}),[R.brand_id,t]);return(0,a.useEffect)((()=>{F(""!==A)}),[A]),(0,a.useEffect)((()=>{O(),(()=>{let e=0,t=0;V&&V.map((s=>{e+=parseInt(s.total_views),t+=parseInt(s.total_watchtime)}))})()}),[t,O]),(0,a.useEffect)((()=>{z(t)}),[]),(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{className:"d-flex",children:(0,w.jsx)("div",{className:"ms-auto d-flex align-items-center mb-3",children:(0,w.jsxs)("div",{className:"dropdown d-flex",children:[(0,w.jsxs)("div",{className:"input-group input-group me-1",children:[(0,w.jsx)("span",{className:"input-group-text border-end-0 border-dark",children:(0,w.jsx)(r.KSO,{})}),(0,w.jsx)("input",{type:"search",className:"form-control border-start-0 border-dark",name:"search",value:A,placeholder:"Search video...",onChange:e=>(e=>{E(e);const t=V.filter((e=>e.video_title&&e.video_title.toLowerCase().includes(A.toLowerCase())));f(t)})(e.target.value)})]}),(0,w.jsxs)(i.A,{show:Q,onToggle:()=>Z(!Q),children:[window.innerWidth>556?(0,w.jsx)(i.A.Toggle,{id:"dropdown-basic",className:"bg-transparent text-dark border-dark",children:(0,w.jsx)("span",{children:null!==t[0].endDate?"".concat(t[0].startDate.toString().slice(4,15)," to ").concat(t[0].endDate.toString().slice(4,15)):"Filter by date"})}):(0,w.jsx)(i.A.Toggle,{id:"dropdown-basic",className:"bg-transparent text-dark border-dark",children:(0,w.jsx)("span",{children:null!==t[0].endDate?"".concat(t[0].startDate.getFullYear().toString().slice(2,4),"/").concat(t[0].startDate.getFullYear().toString().slice(2,4),"/").concat(t[0].startDate.getFullYear().toString().slice(2,4)," - ").concat(t[0].startDate.getFullYear().toString().slice(2,4),"/").concat(t[0].startDate.getFullYear().toString().slice(2,4),"/").concat(t[0].startDate.getFullYear().toString().slice(2,4)):"Filter by date"})}),(0,w.jsxs)(i.A.Menu,{children:[(0,w.jsx)(l.Ur,{editableDateInputs:!1,onChange:e=>z([e.selection]),moveRangeOnFirstSelection:!0,ranges:H,months:2,direction:"horizontal"}),(0,w.jsxs)("div",{className:"w-100",children:[(0,w.jsx)("button",{id:"dropdown-basic",className:"btn btn-sm btn-primary float-end me-3",onClick:()=>{Z(!1),s(H)},children:"Done"}),(0,w.jsx)("button",{id:"dropdown-basic",className:"btn btn-sm btn-outline-primary float-end me-3",onClick:()=>{z([{startDate:new Date(o.getTime()-6048e5),endDate:c,key:"selection"}])},children:"Reset"})]})]})]}),(0,w.jsxs)(i.A,{className:"ms-1",children:[window.innerWidth>556?(0,w.jsx)(i.A.Toggle,{className:"bg-transparent text-dark border-dark",children:"Export"}):(0,w.jsx)(i.A.Toggle,{className:"bg-transparent text-dark border-dark",children:(0,w.jsx)(D.w4m,{})}),(0,w.jsxs)(i.A.Menu,{children:[(0,w.jsxs)(i.A.Item,{onClick:()=>{const e=["date","video_title","total_views","total_unique_views","total_watchtime","average_watchtime","buyNow","addtoCart","askQuestion","engagement_rate","ctr_rate"],t=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-";return e.hasOwnProperty(t)?e[t]:s};let s=["Date","Video Title","Total Views","Unique Views","Watch Time [Mins]","Avg Watch Time [Secs]","Buy Now","Add to Cart","Ask Question","Engagement %","CTR %"].join(",")+"\n";V.forEach((a=>{const o={...a,total_watchtime:(parseInt(a.total_watchtime)/60).toFixed(2)},n=[t(o,e[0]),t(o,e[1]),t(o,e[2]),t(o,e[3]),t(o,e[4]),t(o,e[5]),t(o,e[6]),t(o,e[7]),t(o,e[8]),t(o,e[9]),t(o,e[10])];s+=n.join(",")+"\n"}));const a=new Blob([s],{type:"text/csv;charset=utf-8;"});(0,N.saveAs)(a,"data.csv")},children:[(0,w.jsx)(r.QaY,{color:"gray"})," Export as CSV "]}),(0,w.jsxs)(i.A.Item,{onClick:()=>{const e=["date","video_title","total_views","total_unique_views","total_watchtime","average_watchtime","buyNow","addtoCart","askQuestion","engagement_rate","ctr_rate"],t=[["Date","Video Title","Total Views","Unique Views","Watch Time [Mins]","Avg Watch Time [Secs]","Buy Now","Add to Cart","Ask Question","Engagement %","CTR %"],...V.map((t=>{const s={...t,total_watchtime:(parseInt(t.total_watchtime)/60).toFixed(2)};return e.map((e=>function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-";return e.hasOwnProperty(t)?e[t]:s}(s,e)))}))],s=C.Wp.aoa_to_sheet(t),a=C.Wp.book_new();C.Wp.book_append_sheet(a,s,"Sheet1");const o=C.M9(a,{bookType:"xlsx",type:"array"});(0,N.saveAs)(new Blob([o],{type:"application/octet-stream"}),"data.xlsx")},children:[(0,w.jsx)(r.Ru,{color:"green"})," Export as XLS"]}),(0,w.jsxs)(i.A.Item,{onClick:()=>{const e=new k.default("l","pt","a4",!0),t=["Date","Video Title","Total Views","Unique Views","Watch Time [Mins]","Avg Watch Time [Secs]","Buy Now","Add to Cart","Ask Question","Engagement %","CTR %"],s=["date","video_title","total_views","total_unique_views","total_watchtime","average_watchtime","buyNow","addtoCart","askQuestion","engagement_rate","ctr_rate"],a=[t];V.forEach((e=>{const t={...e,total_watchtime:(parseInt(e.total_watchtime)/60).toFixed(2)},o=s.map((e=>function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-";return e.hasOwnProperty(t)?e[t]:s}(t,e)));a.push(o)})),e.autoTable({head:[t],body:a.slice(1),headStyles:{fillColor:[238,238,119],textColor:[0,0,0]},styles:{cellPadding:1,fontSize:5},columnStyles:{0:{cellWidth:"auto"}},margin:{top:20},startY:20}),e.save("data.pdf")},children:[(0,w.jsx)(r.kl1,{color:"red"})," Export as PDF"]})]})]})]})})}),(0,w.jsx)("div",{style:{width:"100%",overflow:"auto",height:"auto"},children:(0,w.jsx)("div",{style:{border:"1px solid #E0E0E0",minWidth:"1500px"},children:(0,w.jsx)(n.Ay,{columns:q,data:B?null===_||void 0===_?void 0:_.map(((e,t)=>({...e,index:t}))):null===V||void 0===V?void 0:V.map(((e,t)=>({...e,index:t}))),subHeader:!0,progressPending:L,pagination:!0,progressComponent:(0,w.jsx)("div",{className:"p-3 m-4",children:(0,w.jsx)(T.IN,{height:30,width:30,strokeColor:"grey"})}),sortIcon:(0,w.jsx)(G,{}),highlightOnHover:!0,className:"custom-datatable",subHeaderComponent:(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)("div",{className:"d-flex w-100 table_header_row",children:[(0,w.jsx)("div",{className:"table_blank_column"}),(0,w.jsx)("div",{className:"table_higher_column",children:(0,w.jsxs)("div",{className:"d-flex text-center",children:[(0,w.jsx)("div",{className:"perfomance_column",children:"Performance"}),(0,w.jsx)("div",{className:"engagement_column",children:"Engagement"})]})})]})})})})}),(0,w.jsx)(y,{show:d,handleClose:()=>m(!1),data:p}),(0,w.jsx)(M,{show:g,handleClose:()=>v(!1),data:{...b,...t[0]}})]})};s(40932),s(79936),s(59478),s(95365),s(54213),s(91123),s(57270),s(96690),s(5060);s(20917),s(42678),s(33796);s(38421),s(46867),s(99445),s(98831),s(70922),s(97304);var B=s(73216);s(82462);s(18304);s(74857);const F=e=>{let{state:t,setState:s,tab:n,setTab:i}=e;const[l,r]=(0,a.useState)([]),c=(0,u.d4)((e=>e.auth.user)),d=(0,B.zy)(),m=new URLSearchParams(d.search);m.get("createTable"),m.get("Tableedit");(0,a.useEffect)((()=>{(async()=>{try{const e=await h.A.get("https://liveshopping.asia/getPlaylistByBrandId?brandId=".concat(c.brand_id));e.data.playlist?r(e.data.playlist):r([])}catch(e){console.log(e)}})()}),[c]);const p=(0,B.Zp)();return(0,a.useEffect)((()=>{document.querySelectorAll("#responsive-tabs-ssv .nav-link").forEach((e=>{e.getAttribute("aria-controls")===n?(e.classList.add("show"),e.classList.add("active")):(e.classList.remove("show"),e.classList.remove("active"))}))}),[n]),(0,a.useEffect)((()=>{i("Reports")}),[]),(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(o.m,{children:(0,w.jsx)("title",{children:"SWIRL | Short Videos"})}),(0,w.jsx)("div",{children:(0,w.jsxs)("div",{className:"col",children:[(0,w.jsx)("h4",{className:"ms-2 p-1",style:{fontSize:"32px",fontWeight:"700"},children:"Shoppable video"}),(0,w.jsx)("div",{className:"d-flex ",children:(0,w.jsx)("ul",{className:"nav nav-tabs ssv",id:"responsive-tabs-ssv",role:"tablist",children:(0,w.jsx)("li",{className:"nav-item show active",role:"presentation",children:(0,w.jsx)("button",{className:"nav-link",id:"Reports-tab","data-bs-toggle":"tab","data-bs-target":"#Reports",type:"button",role:"tab","aria-controls":"Reports","aria-selected":"false",onClick:()=>{var e;e=!1,m.set("createTable",e),p({search:m.toString()}),(e=>{m.set("Tableedit",e),p({search:m.toString()})})(!1),i("Reports")},children:"Reports"})})})}),(0,w.jsx)("div",{className:"tab-content p-3 ",id:"responsive-tabs-content",style:{height:"Upload"==n||"Reports"==n||"playlist"==n?"calc(98vh - 160px)":"calc(97vh - 138px)",overflow:"Settings"!=n?"auto":""},children:(0,w.jsx)("div",{className:"tab-pane fade show active h-100",id:"Reports",role:"tabpanel","aria-labelledby":"Reports-tab",children:(0,w.jsx)(E,{state:t,setState:s})})})]})})]})}}}]);
//# sourceMappingURL=897.a139f214.chunk.js.map